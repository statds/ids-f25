<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>13&nbsp; Advanced Topics – Introduction to Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./95-exercises.html" rel="next">
<link href="./20-deeplearning.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-27c261d06b905028a18691de25d09dde.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./90-advanced.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Advanced Topics</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Data Science</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preliminaries</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Project Management</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reproducible Data Science</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Python Refreshment</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Visualization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-manipulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Manipulation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-exploration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Exploration</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Regression Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Classification</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-supervised.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Supervised Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-unsupervised.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Unsupervised Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-deeplearning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Deep Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./90-advanced.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Advanced Topics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./95-exercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Exercises</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#filling-missing-data-with-multiple-imputation" id="toc-filling-missing-data-with-multiple-imputation" class="nav-link active" data-scroll-target="#filling-missing-data-with-multiple-imputation"><span class="header-section-number">13.1</span> Filling Missing Data With Multiple Imputation</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">13.1.1</span> Introduction</a></li>
  <li><a href="#assessing-missingness" id="toc-assessing-missingness" class="nav-link" data-scroll-target="#assessing-missingness"><span class="header-section-number">13.1.2</span> Assessing Missingness</a></li>
  <li><a href="#benefits-of-imputation" id="toc-benefits-of-imputation" class="nav-link" data-scroll-target="#benefits-of-imputation"><span class="header-section-number">13.1.3</span> Benefits of Imputation</a></li>
  <li><a href="#limitations-of-imputation" id="toc-limitations-of-imputation" class="nav-link" data-scroll-target="#limitations-of-imputation"><span class="header-section-number">13.1.4</span> Limitations of Imputation</a></li>
  <li><a href="#methods-of-single-imputation" id="toc-methods-of-single-imputation" class="nav-link" data-scroll-target="#methods-of-single-imputation"><span class="header-section-number">13.1.5</span> Methods of Single Imputation</a></li>
  <li><a href="#multiple-imputation" id="toc-multiple-imputation" class="nav-link" data-scroll-target="#multiple-imputation"><span class="header-section-number">13.1.6</span> Multiple Imputation</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">13.1.7</span> Conclusion</a></li>
  <li><a href="#further-readings" id="toc-further-readings" class="nav-link" data-scroll-target="#further-readings"><span class="header-section-number">13.1.8</span> Further Readings</a></li>
  </ul></li>
  <li><a href="#uniform-manifold-approximation-and-projection" id="toc-uniform-manifold-approximation-and-projection" class="nav-link" data-scroll-target="#uniform-manifold-approximation-and-projection"><span class="header-section-number">13.2</span> Uniform Manifold Approximation and Projection</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1"><span class="header-section-number">13.2.1</span> Introduction</a></li>
  <li><a href="#other-dimensionality-reduction-techniques" id="toc-other-dimensionality-reduction-techniques" class="nav-link" data-scroll-target="#other-dimensionality-reduction-techniques"><span class="header-section-number">13.2.2</span> Other Dimensionality Reduction Techniques</a></li>
  <li><a href="#algorithm-approach-and-intuition" id="toc-algorithm-approach-and-intuition" class="nav-link" data-scroll-target="#algorithm-approach-and-intuition"><span class="header-section-number">13.2.3</span> Algorithm Approach and Intuition</a></li>
  <li><a href="#practical-example-umap-on-28x28-digit-data" id="toc-practical-example-umap-on-28x28-digit-data" class="nav-link" data-scroll-target="#practical-example-umap-on-28x28-digit-data"><span class="header-section-number">13.2.4</span> Practical Example: UMAP on 28x28 digit data</a></li>
  <li><a href="#conclusion-1" id="toc-conclusion-1" class="nav-link" data-scroll-target="#conclusion-1"><span class="header-section-number">13.2.5</span> Conclusion</a></li>
  <li><a href="#further-readings-1" id="toc-further-readings-1" class="nav-link" data-scroll-target="#further-readings-1"><span class="header-section-number">13.2.6</span> Further Readings</a></li>
  </ul></li>
  <li><a href="#how-to-call-r-from-python" id="toc-how-to-call-r-from-python" class="nav-link" data-scroll-target="#how-to-call-r-from-python"><span class="header-section-number">13.3</span> How to call R from Python</a>
  <ul class="collapse">
  <li><a href="#motivations" id="toc-motivations" class="nav-link" data-scroll-target="#motivations"><span class="header-section-number">13.3.1</span> Motivations</a></li>
  <li><a href="#corresponding-packages" id="toc-corresponding-packages" class="nav-link" data-scroll-target="#corresponding-packages"><span class="header-section-number">13.3.2</span> Corresponding packages</a></li>
  <li><a href="#r-python-advantages" id="toc-r-python-advantages" class="nav-link" data-scroll-target="#r-python-advantages"><span class="header-section-number">13.3.3</span> R / Python advantages</a></li>
  <li><a href="#setup-both-r-and-python" id="toc-setup-both-r-and-python" class="nav-link" data-scroll-target="#setup-both-r-and-python"><span class="header-section-number">13.3.4</span> Setup both R and Python</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example"><span class="header-section-number">13.3.5</span> Example</a></li>
  <li><a href="#more-resources" id="toc-more-resources" class="nav-link" data-scroll-target="#more-resources"><span class="header-section-number">13.3.6</span> Additional resources</a></li>
  </ul></li>
  <li><a href="#making-a-personal-webpage-on-github-pages" id="toc-making-a-personal-webpage-on-github-pages" class="nav-link" data-scroll-target="#making-a-personal-webpage-on-github-pages"><span class="header-section-number">13.4</span> Making a Personal Webpage on GitHub Pages</a>
  <ul class="collapse">
  <li><a href="#introduction-2" id="toc-introduction-2" class="nav-link" data-scroll-target="#introduction-2"><span class="header-section-number">13.4.1</span> Introduction</a></li>
  <li><a href="#why-use-github-pages" id="toc-why-use-github-pages" class="nav-link" data-scroll-target="#why-use-github-pages"><span class="header-section-number">13.4.2</span> Why Use GitHub Pages?</a></li>
  <li><a href="#setting-up-jekyll-locally" id="toc-setting-up-jekyll-locally" class="nav-link" data-scroll-target="#setting-up-jekyll-locally"><span class="header-section-number">13.4.3</span> Setting Up Jekyll locally</a></li>
  <li><a href="#pushing-to-github-pages" id="toc-pushing-to-github-pages" class="nav-link" data-scroll-target="#pushing-to-github-pages"><span class="header-section-number">13.4.4</span> Pushing to GitHub Pages</a></li>
  <li><a href="#customizing-your-page" id="toc-customizing-your-page" class="nav-link" data-scroll-target="#customizing-your-page"><span class="header-section-number">13.4.5</span> Customizing Your Page</a></li>
  <li><a href="#themes" id="toc-themes" class="nav-link" data-scroll-target="#themes"><span class="header-section-number">13.4.6</span> Themes</a></li>
  <li><a href="#understanding-layouts-in-minima" id="toc-understanding-layouts-in-minima" class="nav-link" data-scroll-target="#understanding-layouts-in-minima"><span class="header-section-number">13.4.7</span> Understanding Layouts in minima</a></li>
  <li><a href="#customize-_config.yml" id="toc-customize-_config.yml" class="nav-link" data-scroll-target="#customize-_config.yml"><span class="header-section-number">13.4.8</span> Customize _config.yml</a></li>
  <li><a href="#changing-colors-and-fonts" id="toc-changing-colors-and-fonts" class="nav-link" data-scroll-target="#changing-colors-and-fonts"><span class="header-section-number">13.4.9</span> Changing colors and fonts</a></li>
  <li><a href="#conclusion-2" id="toc-conclusion-2" class="nav-link" data-scroll-target="#conclusion-2"><span class="header-section-number">13.4.10</span> Conclusion</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">13.4.11</span> Further Reading</a></li>
  </ul></li>
  <li><a href="#web-scraping" id="toc-web-scraping" class="nav-link" data-scroll-target="#web-scraping"><span class="header-section-number">13.5</span> Web Scraping</a>
  <ul class="collapse">
  <li><a href="#an-introduction-to-web-scraping" id="toc-an-introduction-to-web-scraping" class="nav-link" data-scroll-target="#an-introduction-to-web-scraping"><span class="header-section-number">13.5.1</span> An Introduction to Web Scraping</a></li>
  <li><a href="#basics-of-web-requests" id="toc-basics-of-web-requests" class="nav-link" data-scroll-target="#basics-of-web-requests"><span class="header-section-number">13.5.2</span> Basics of Web Requests</a></li>
  <li><a href="#an-introduction-to-beautifulsoup" id="toc-an-introduction-to-beautifulsoup" class="nav-link" data-scroll-target="#an-introduction-to-beautifulsoup"><span class="header-section-number">13.5.3</span> An Introduction to BeautifulSoup</a></li>
  <li><a href="#an-introduction-to-selenium" id="toc-an-introduction-to-selenium" class="nav-link" data-scroll-target="#an-introduction-to-selenium"><span class="header-section-number">13.5.4</span> An Introduction to Selenium</a></li>
  <li><a href="#further-reading-1" id="toc-further-reading-1" class="nav-link" data-scroll-target="#further-reading-1"><span class="header-section-number">13.5.5</span> Further Reading</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Advanced Topics</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- ## multiple imputation -->
<section id="filling-missing-data-with-multiple-imputation" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="filling-missing-data-with-multiple-imputation"><span class="header-section-number">13.1</span> Filling Missing Data With Multiple Imputation</h2>
<p>This section was prepared by Jacob Schlessel, a junior double majoring in Statistical Data Science and Economics.</p>
<section id="introduction" class="level3" data-number="13.1.1">
<h3 data-number="13.1.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">13.1.1</span> Introduction</h3>
<p>It is rare to work with a dataset that does not have missing values. This section will introduce multiple imputation as a method of filling these values and justify its use over other methods of imputation. The following topics will be covered:</p>
<ol type="1">
<li><p>Assessing Missingness</p></li>
<li><p>Benefits of Imputation</p></li>
<li><p>Limitations of Imputation</p></li>
<li><p>Methods of Single Imputation</p></li>
<li><p>Multiple Imputation</p></li>
</ol>
</section>
<section id="assessing-missingness" class="level3" data-number="13.1.2">
<h3 data-number="13.1.2" class="anchored" data-anchor-id="assessing-missingness"><span class="header-section-number">13.1.2</span> Assessing Missingness</h3>
<p>Before filling in missing values, we must determine whether imputation makes sense given the context of the data. As a starting point, we can classify the missingness of the data into one of three different types. To illustrate the differences between these cases, we will use the following example:</p>
<p>A lab technician conducts a study on the relationship between age and blood pressure. Measurements are taken from a randomly selected group of 1000 volunteers, with all age groups being included in the study.</p>
<ol type="1">
<li><strong>Missing completely at random (MCAR)</strong>: the ideal case - missingness is independent of both observed and unobserved data
<ul>
<li>A lab technician accidentally forgets to record 10 patients’ blood pressure values because of a computer glitch</li>
<li>Missingness is random noise - estimates are not biased</li>
</ul></li>
<li><strong>Missing at random (MAR)</strong>: the second best case - missingness depends only observed variables
<ul>
<li>Older patients are more likely to skip the blood pressure test because the cuff feels uncomfortable</li>
<li>Results are biased if you ignore the missing values</li>
</ul></li>
<li><strong>Missing not at random (MNAR)</strong>: the missing values depend on the unobserved(missing) value itself
<ul>
<li>Patients with very high blood pressure intentionally refuse the test for fear of bad news</li>
<li>Imputation is not possible - requires advanced techniques like sensitivity analyses or pattern-mixture modes</li>
</ul></li>
</ol>
<p>Once we understand what type of missingness exists in the data, we have two options:</p>
<ul>
<li>Complete Case Analysis: Drop all rows with missing data and only include complete rows in analysis</li>
<li>Imputation: Replace missing values with specific values, include filled values in analysis</li>
</ul>
<section id="application-in-python" class="level4" data-number="13.1.2.1">
<h4 data-number="13.1.2.1" class="anchored" data-anchor-id="application-in-python"><span class="header-section-number">13.1.2.1</span> Application in Python:</h4>
<p>We wll use the <code>airquality</code> dataset from <code>statsmodels</code> as an example of working with missing data.</p>
<div id="ce70cc5d" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> sm.datasets.get_rdataset(<span class="st">"airquality"</span>).data</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize missing data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>missing_count <span class="op">=</span> df.isna().<span class="bu">sum</span>()</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>missing_percent <span class="op">=</span> (df.isna().mean() <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>missing_summary <span class="op">=</span> pd.DataFrame({</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Missing Count'</span>: missing_count,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Missing %'</span>: missing_percent</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>}).sort_values(<span class="st">'Missing %'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(missing_summary)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Missing Count  Missing %
Ozone               37      24.18
Solar.R              7       4.58
Wind                 0       0.00
Temp                 0       0.00
Month                0       0.00
Day                  0       0.00</code></pre>
</div>
</div>
<p>We cannot perform imputation if the data is MNAR. Therefore, to disprove that a dataset is MNAR, a good starting point is to look for evidence for MCAR or MAR, as a dataset cannot exhibit two different types of missingness. We do not actually need to know which of these two cases apply since imputation works with both, we just need to be able to confidently claim that the missing values are not associated with unobserved values and thus will not affect inference.</p>
<p>To find evidence of MCAR or MAR, we can use the following framework to analyze patterns of missingness:</p>
<ol type="1">
<li><p>Define the missingness target (the variable with missing values)</p></li>
<li><p>Perform statistical tests (t-tests for numeric, chi-squared tests for categorical) - note: this is not always conclusive</p></li>
<li><p>Find correlations between the target and other variables. If the correlation is above 0.2, this could be evidence of MAR and warrants further investigation</p></li>
<li><p>Use domain knowledge to perform in-depth analysis to rule out the possibility of MNAR missingness. Note: it is impossible to definitively prove or disprove MNAR based on the data because by definition, we do not have data to analyze.</p></li>
</ol>
<p>Null hypothesis: The means for each variable are the same for the in the missing/nonmissing <code>Ozone</code> groups</p>
<p>Alternative hypothesis: The means for each variable are different for the in the missing/nonmissing <code>Ozone</code> groups</p>
<div id="79363f09" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> ttest_ind</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create indicator: 1 if Ozone is missing, else 0</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Ozone_missing'</span>] <span class="op">=</span> df[<span class="st">'Ozone'</span>].isna().astype(<span class="bu">int</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> [<span class="st">'Solar.R'</span>, <span class="st">'Wind'</span>, <span class="st">'Temp'</span>]:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    group1 <span class="op">=</span> df.loc[df[<span class="st">'Ozone_missing'</span>] <span class="op">==</span> <span class="dv">0</span>, col].dropna() </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    group2 <span class="op">=</span> df.loc[df[<span class="st">'Ozone_missing'</span>] <span class="op">==</span> <span class="dv">1</span>, col].dropna()  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    stat, p <span class="op">=</span> ttest_ind(group1, group2, equal_var<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    mean1 <span class="op">=</span> group1.mean()</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    mean2 <span class="op">=</span> group2.mean()</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Mean (Ozone observed) = </span><span class="sc">{</span>mean1<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Mean (Ozone missing)  = </span><span class="sc">{</span>mean2<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  p-value = </span><span class="sc">{</span>p<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Solar.R:
  Mean (Ozone observed) = 184.80
  Mean (Ozone missing)  = 189.51
  p-value = 0.7846

Wind:
  Mean (Ozone observed) = 9.86
  Mean (Ozone missing)  = 10.26
  p-value = 0.5446

Temp:
  Mean (Ozone observed) = 77.87
  Mean (Ozone missing)  = 77.92
  p-value = 0.9787
</code></pre>
</div>
</div>
<p>The pvalues are all large, meaning the means are the same for each variable regardless of whether <code>ozone</code> is missing.</p>
<p>Since <code>Month</code> is a categorical variable, we can perform a chi-squared test to check if the number of missing values depend on the month:</p>
<p>Null hypothesis: The number of missing <code>Ozone</code> values does not depend on the month Alternative hypothesis: The number of missing <code>Ozone</code> values does depend on the month in some way</p>
<div id="250c6785" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> chi2_contingency</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create contingency table: Month × Missingness</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>contingency <span class="op">=</span> pd.crosstab(df[<span class="st">"Month"</span>], df[<span class="st">"Ozone_missing"</span>])</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Contingency Table (Month vs. Ozone Missingness):</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(contingency)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform Chi-square test of independence</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>chi2, p, dof, expected <span class="op">=</span> chi2_contingency(contingency)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Chi-square test results:"</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Chi-square statistic = </span><span class="sc">{</span>chi2<span class="sc">:.3f}</span><span class="ss">"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Degrees of freedom    = </span><span class="sc">{</span>dof<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"p-value               = </span><span class="sc">{</span>p<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Contingency Table (Month vs. Ozone Missingness):

Ozone_missing   0   1
Month                
5              26   5
6               9  21
7              26   5
8              26   5
9              29   1

Chi-square test results:
Chi-square statistic = 44.751
Degrees of freedom    = 4
p-value               = 0.0000</code></pre>
</div>
</div>
<p>June has noticeably more missing <code>Ozone</code> values than the other months, so we confirm that this difference is statistically significant by observing a pvalue of 0. We can confirm this visually as well:</p>
<div id="52447209" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot number of missing ozone observations by month</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>missing_counts <span class="op">=</span> (</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    df[df[<span class="st">"Ozone_missing"</span>] <span class="op">==</span> <span class="dv">1</span>][<span class="st">"Month"</span>]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    .value_counts()</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    .sort_index()</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>missing_counts <span class="op">=</span> (</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    missing_counts.reindex([<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>], fill_value<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>plt.bar(</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    missing_counts.index.astype(<span class="bu">str</span>),</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    missing_counts.values,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"lightsteelblue"</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Month (May = 5, ..., September = 9)"</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Number of Missing Ozone Values"</span>)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Missing Ozone Values by Month"</span>)</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">"y"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-5-output-1.png" width="566" height="374" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Since the number of missing values of <code>Ozone</code> depends on observed data, we have determined that the missingness is MAR and we can continue with imputation.</p>
<p>We can follow the same process for analyzing the missingness of <code>Solar.R</code>.</p>
<div id="ffd5d87d" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Solar_missing'</span>] <span class="op">=</span> df[<span class="st">'Solar.R'</span>].isna().astype(<span class="bu">int</span>) <span class="co">#1 = Missing</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#t test for numeric variables</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> [<span class="st">'Ozone'</span>, <span class="st">'Wind'</span>, <span class="st">'Temp'</span>]:</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    g1 <span class="op">=</span> df.loc[df[<span class="st">'Solar_missing'</span>]<span class="op">==</span><span class="dv">0</span>, col].dropna()</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    g2 <span class="op">=</span> df.loc[df[<span class="st">'Solar_missing'</span>]<span class="op">==</span><span class="dv">1</span>, col].dropna()</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    stat, p <span class="op">=</span> ttest_ind(g1, g2, equal_var<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(col)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Mean (Solar.R observed) = </span><span class="sc">{</span>g1<span class="sc">.</span>mean()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Mean: (Solar.R missing) = </span><span class="sc">{</span>g2<span class="sc">.</span>mean()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"p-value = </span><span class="sc">{</span>p<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#chi squared test for categorical variable (month)</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>cont <span class="op">=</span> pd.crosstab(df[<span class="st">'Month'</span>], df[<span class="st">'Solar_missing'</span>])</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>chi2, p, dof, exp <span class="op">=</span> chi2_contingency(cont)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Month vs Solar.R missingness: chi2=</span><span class="sc">{</span>chi2<span class="sc">:.2f}</span><span class="ss">, p=</span><span class="sc">{</span>p<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Bar chart of counts by month</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>missing_counts <span class="op">=</span> (</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    df[df[<span class="st">"Solar_missing"</span>] <span class="op">==</span> <span class="dv">1</span>][<span class="st">"Month"</span>]</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    .value_counts()</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    .sort_index()</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>missing_counts <span class="op">=</span> (</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    missing_counts.reindex([<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>], fill_value<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">4</span>))</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>plt.bar(</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    missing_counts.index.astype(<span class="bu">str</span>),</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    missing_counts.values,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"lightsteelblue"</span>,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">"black"</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Month (May = 5, ..., September = 9)"</span>)</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Number of Missing Solar.R Values"</span>)</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Missing Solar.R Values by Month"</span>)</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>plt.grid(axis<span class="op">=</span><span class="st">"y"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Ozone
Mean (Solar.R observed) = 42.10
Mean: (Solar.R missing) = 42.80
p-value = 0.9602

Wind
Mean (Solar.R observed) = 10.00
Mean: (Solar.R missing) = 9.00
p-value = 0.5343

Temp
Mean (Solar.R observed) = 78.12
Mean: (Solar.R missing) = 73.00
p-value = 0.3602

Month vs Solar.R missingness: chi2=11.14, p=0.0251</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-6-output-2.png" width="566" height="374" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Similarly to <code>Ozone</code>, it appears that <code>Solar.R</code> is MAR since the missing values are related to the month during which the data was measured.</p>
</section>
<section id="important-notes" class="level4" data-number="13.1.2.2">
<h4 data-number="13.1.2.2" class="anchored" data-anchor-id="important-notes"><span class="header-section-number">13.1.2.2</span> Important Notes</h4>
<ul>
<li><p>Consider MNAR if domain knowledge suggests it</p></li>
<li><p>Make sure to evaluate case-specific context to ensure imputation is appropriate. For example, using statistical imputation methods for the missing zip codes in the NYC Crash Data would not have made sense</p></li>
<li><p>Proportion of missing data alone should not dictate whether imputation is used or not, need to use best judgement</p></li>
</ul>
</section>
</section>
<section id="benefits-of-imputation" class="level3" data-number="13.1.3">
<h3 data-number="13.1.3" class="anchored" data-anchor-id="benefits-of-imputation"><span class="header-section-number">13.1.3</span> Benefits of Imputation</h3>
<p>Impututation replaces missing values with estimated ones to create a complete dataset. This process offers a number of benefits for modeling and analysis.</p>
<section id="preserving-information" class="level4" data-number="13.1.3.1">
<h4 data-number="13.1.3.1" class="anchored" data-anchor-id="preserving-information"><span class="header-section-number">13.1.3.1</span> Preserving information</h4>
<p>If we were to perform complete case analysis, we would lose the valuable information provided by the rows that may be missing values for one or two variables. By making an educated guess as to what the value would have been, we can</p>
<ul>
<li>Maintain real-world relationships observed among variables</li>
<li>Preserve sample size to build models with higher precision</li>
<li>Conduct robust analysis with messy data</li>
<li>Enables use of statistical methods and machine learning models</li>
</ul>
</section>
<section id="reducing-bias" class="level4" data-number="13.1.3.2">
<h4 data-number="13.1.3.2" class="anchored" data-anchor-id="reducing-bias"><span class="header-section-number">13.1.3.2</span> Reducing bias</h4>
<p>If the data are MAR, deletion will bias the results of any statistical modeling because the missing cases are systematically different from observed cases. To ensure that our data is representative of what we are studying, we can use fill missing values using estimates based on relationships that exist in our observed data. Imputation preserves covariances and joint distributions, so the result is lower bias in model coefficients.</p>
<p>Note: not all imputation methods have the same effect on reducing bias. Multiple imputation tends to minimize bias more than single imputation methods when data is MAR.</p>
</section>
</section>
<section id="limitations-of-imputation" class="level3" data-number="13.1.4">
<h3 data-number="13.1.4" class="anchored" data-anchor-id="limitations-of-imputation"><span class="header-section-number">13.1.4</span> Limitations of Imputation</h3>
<p>Imputation does not completely solve issues caused by missing data, it only alleviates them. It is important to note the following limitations of imputation to better understand when it is appropriate to use:</p>
<ul>
<li>Simple imputation methods distort distributions and can impact visualizations</li>
<li>Need to acknowledge that imputing missing data adds some uncertainty</li>
<li>Cannot correct cases where data are MNAR</li>
<li>Can be very computationally expensive depending on method of imputation and complexity of data</li>
</ul>
</section>
<section id="methods-of-single-imputation" class="level3" data-number="13.1.5">
<h3 data-number="13.1.5" class="anchored" data-anchor-id="methods-of-single-imputation"><span class="header-section-number">13.1.5</span> Methods of Single Imputation</h3>
<p><strong>Single Imputation</strong>: Replacing each missing value with a single, fixed estimate</p>
<p>Types of single imputation:</p>
<ol type="1">
<li>Mean Imputation: Replacing missing values with the mean of the observed data</li>
<li>Median Imputation: Replacing missing values with the median of observed data</li>
<li>Mode Imputation: Replace missing values with the mode (for filling categorical data)</li>
<li>Hot-Deck Imputation: Replace a missing value with an observed value (a “donor” from a similar case)</li>
</ol>
<p>For each method, we will fit a regression model with <code>Temp</code> as the response variable and <code>Ozone</code>, <code>Solar.R</code>, <code>Wind</code>, and <code>Month</code> as predictors. We will find the value of the coefficients and their standard errors after applying each method of imputation to compare the results.</p>
<section id="mean-imputation" class="level4" data-number="13.1.5.1">
<h4 data-number="13.1.5.1" class="anchored" data-anchor-id="mean-imputation"><span class="header-section-number">13.1.5.1</span> Mean Imputation</h4>
<p>We will replace all missing <code>Ozone</code> and <code>Solar.R</code> values with the respective means from the observed data:</p>
<div id="81227da6" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encode Month as categorical and create dummy variables</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Month"</span>] <span class="op">=</span> df[<span class="st">"Month"</span>].astype(<span class="st">"category"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span> pd.get_dummies(df, columns<span class="op">=</span>[<span class="st">"Month"</span>], drop_first<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.astype(<span class="bu">float</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign predictor and response variables</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>x_var <span class="op">=</span> [</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Ozone"</span>, <span class="st">"Solar.R"</span>, <span class="st">"Wind"</span>, <span class="st">"Month_6"</span>, <span class="st">"Month_7"</span>, <span class="st">"Month_8"</span>, <span class="st">"Month_9"</span>]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply mean imputation and fit the regression model</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>df_mean <span class="op">=</span> df.copy()</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"Ozone"</span>, <span class="st">"Solar.R"</span>]:</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    df_mean[col] <span class="op">=</span> df_mean[col].fillna(df_mean[col].mean())</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df_mean[<span class="st">"Temp"</span>]</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(df_mean[x_var])</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> pd.DataFrame({</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Coefficient"</span>: model.params.<span class="bu">round</span>(<span class="dv">4</span>),</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Std_Error"</span>: model.bse.<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Coefficient  Std_Error
const        64.6504     2.3474
Ozone         0.0953     0.0207
Solar.R       0.0153     0.0054
Wind         -0.3807     0.1512
Month_6      11.7914     1.4211
Month_7      13.9666     1.4895
Month_8      14.5699     1.5075
Month_9      10.5281     1.4189</code></pre>
</div>
</div>
<p>Benefits:</p>
<ul>
<li>Is sufficient if less than 5% of a particular variable is missing</li>
</ul>
<p>Limitations:</p>
<ul>
<li>Underestimates variances -&gt; does not add any spread to the data, standard errors and confidence intervals are too small</li>
<li>Reduces natural variability</li>
<li>Performs poorly if data is not MCAR</li>
<li>Shrinks covariance -&gt; coefficients are biased towards zero</li>
</ul>
</section>
<section id="median-imputation" class="level4" data-number="13.1.5.2">
<h4 data-number="13.1.5.2" class="anchored" data-anchor-id="median-imputation"><span class="header-section-number">13.1.5.2</span> Median Imputation</h4>
<p>We can fit the same model, this time using median imputation:</p>
<div id="a28eb191" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df_median <span class="op">=</span> df.copy()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply median imputation and fit the model</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"Ozone"</span>, <span class="st">"Solar.R"</span>]:</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    df_median[col] <span class="op">=</span> df_median[col].fillna(df_median[col].median())</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Define predictors and response</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df_median[<span class="st">"Temp"</span>]</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(df_median[x_var])</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Fit OLS regression</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 6) Display coefficients and standard errors only</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> pd.DataFrame({</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Coefficient"</span>: model.params.<span class="bu">round</span>(<span class="dv">4</span>),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Std_Error"</span>: model.bse.<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Coefficient  Std_Error
const        64.6857     2.3324
Ozone         0.0965     0.0205
Solar.R       0.0150     0.0054
Wind         -0.3708     0.1509
Month_6      12.3827     1.4122
Month_7      14.0042     1.4848
Month_8      14.5675     1.5032
Month_9      10.4375     1.4178</code></pre>
</div>
</div>
<p>Benefits:</p>
<ul>
<li>More robust to outliers than mean imputation</li>
</ul>
<p>Limitations:</p>
<ul>
<li>Underestimates uncertainty</li>
<li>Flattens the distribution by clustering values at the center</li>
</ul>
</section>
<section id="hot-deck-imputation" class="level4" data-number="13.1.5.3">
<h4 data-number="13.1.5.3" class="anchored" data-anchor-id="hot-deck-imputation"><span class="header-section-number">13.1.5.3</span> Hot-Deck Imputation</h4>
<p>Hot-Deck imputation chooses the value from a similar observation in the current dataset to fill the missing values with. The “donor” can be chosen randomly or conditionally. Here. we will fill missing values with similar observations from the same month, since earlier we found that <code>Month</code> was related to the number of missing values of both <code>Ozone</code> and <code>Solar.R</code>.</p>
<div id="12f0ccc9" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>df_hot <span class="op">=</span> df.copy()</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> np.random.default_rng(<span class="dv">42</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hot_deck_impute(df, target_col, month_dummies):</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reconstruct Month number from dummies (5–9)</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.copy()</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"Month_num"</span>] <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, col <span class="kw">in</span> <span class="bu">enumerate</span>(month_dummies, start<span class="op">=</span><span class="dv">6</span>):</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        df.loc[df[col] <span class="op">==</span> <span class="dv">1</span>, <span class="st">"Month_num"</span>] <span class="op">=</span> i</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Impute missing values within same month</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> df[df[target_col].isna()].index:</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        month <span class="op">=</span> df.at[i, <span class="st">"Month_num"</span>]</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        donor_pool <span class="op">=</span> df.loc[</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>            (df[<span class="st">"Month_num"</span>] <span class="op">==</span> month) <span class="op">&amp;</span> (<span class="op">~</span>df[target_col].isna()), target_col</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> donor_pool.empty:</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>            donor_pool <span class="op">=</span> df.loc[<span class="op">~</span>df[target_col].isna(), target_col]</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>        df.at[i, target_col] <span class="op">=</span> rng.choice(donor_pool.values)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df.drop(columns<span class="op">=</span><span class="st">"Month_num"</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply to missing targets and fit model</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>month_dummies <span class="op">=</span> [<span class="st">"Month_6"</span>, <span class="st">"Month_7"</span>, <span class="st">"Month_8"</span>, <span class="st">"Month_9"</span>]</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"Ozone"</span>, <span class="st">"Solar.R"</span>]:</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    df_hot <span class="op">=</span> hot_deck_impute(df_hot, col, month_dummies)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df_hot[<span class="st">"Temp"</span>]</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(df_hot[x_var])</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> pd.DataFrame({</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Coefficient"</span>: model.params.<span class="bu">round</span>(<span class="dv">4</span>),</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Std_Error"</span>: model.bse.<span class="bu">round</span>(<span class="dv">4</span>)</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(results)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Coefficient  Std_Error
const        66.0892     2.2664
Ozone         0.0929     0.0194
Solar.R       0.0128     0.0053
Wind         -0.4199     0.1475
Month_6      12.5071     1.4301
Month_7      13.6540     1.5196
Month_8      13.9432     1.5414
Month_9      10.0670     1.4339</code></pre>
</div>
</div>
<p>Benefits:</p>
<ul>
<li>Preserves real data values -&gt; borrowed from observed “donors”</li>
<li>Retains covariance structure, keeping relationships realistic</li>
<li>Works well in MAR cases</li>
</ul>
<p>Limitations:</p>
<ul>
<li>Requires enough donor candidates to avoid highly biased results</li>
<li>Can propagate outliers</li>
</ul>
</section>
</section>
<section id="multiple-imputation" class="level3" data-number="13.1.6">
<h3 data-number="13.1.6" class="anchored" data-anchor-id="multiple-imputation"><span class="header-section-number">13.1.6</span> Multiple Imputation</h3>
<p>Instead of replacing the missing cases with a single guess, multiple imputation creates multiple guesses to incorporate some randomness that mimics real world uncertainty.</p>
<p><strong>Multiple Imputation by Chained Equations (MICE)</strong>: the most widely used implementation of multiple imputation</p>
<ol type="1">
<li><p>Define one target variable and start with simple guesses (mean/median imputation) for missing cases of the non-target variable</p></li>
<li><p>Fit a regression model for the target using all other variables as predictors</p></li>
<li><p>Impute the missing values of the target variable with the estimate generated by the regression</p></li>
<li><p>Repeat for all variables that have missing data, using your newly found imputations as training data</p></li>
<li><p>Repeat the process m times using different random draws to create m complete datasets. For each cycle, the coefficients for the regression models are sampled from the posterior distribution - essentially, the coefficients are randomly selected from their respective distributions of their plausible values</p></li>
<li><p>Fit the final model m times using the complete datasets and pool results using Rubin’s Rules to combine estimates and obtain valid inference</p></li>
</ol>
<p><strong>Rubin’s Rules</strong>: formulas for combining m regression results into one final set of estimates, correctly accounts for within-imputation variance and between-imputation variance.</p>
<p><strong>Pooled Estimate (Mean of Coefficients)</strong></p>
<p><span class="math display">\[
\bar{Q} = \frac{1}{m} \sum_{i=1}^{m} Q_i
\]</span></p>
<ul>
<li><span class="math inline">\(Q_i\)</span>: estimate (regression coefficient) from imputed dataset <em>i</em><br>
</li>
<li><span class="math inline">\(\bar{Q}\)</span>: overall pooled estimate (average of all estimates)</li>
</ul>
<hr>
<p><strong>Within-Imputation Variance</strong>: captures the uncertainty within each model</p>
<p><span class="math display">\[
\bar{U} = \frac{1}{m} \sum_{i=1}^{m} U_i
\]</span></p>
<ul>
<li><span class="math inline">\(U_i\)</span>: estimated variance from dataset <em>i</em></li>
</ul>
<hr>
<p><strong>Between-Imputation Variance</strong>: captures uncertainty across imputations</p>
<p><span class="math display">\[
B = \frac{1}{m - 1} \sum_{i=1}^{m} (Q_i - \bar{Q})^2
\]</span></p>
<hr>
<p><strong>Total Variance (Rubin’s Combined Uncertainty)</strong>: combines both within- and<br>
between-imputation uncertainty</p>
<p><span class="math display">\[
T = \bar{U} + \left(1 + \frac{1}{m}\right) B
\]</span></p>
<hr>
<p><strong>Pooled Standard Error</strong>: the final standard error that accounts for both<br>
model uncertainty and missing-data uncertainty, useful for inference</p>
<p><span class="math display">\[
SE(\bar{Q}) = \sqrt{T}
\]</span></p>
<section id="summary-table" class="level4" data-number="13.1.6.1">
<h4 data-number="13.1.6.1" class="anchored" data-anchor-id="summary-table"><span class="header-section-number">13.1.6.1</span> Summary Table</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 19%">
<col style="width: 42%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Symbol</th>
<th style="text-align: left;">Meaning</th>
<th style="text-align: left;">Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(Q_i\)</span></td>
<td style="text-align: left;">Estimate from imputation <em>i</em></td>
<td style="text-align: left;">e.g., regression coefficient</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(U_i\)</span></td>
<td style="text-align: left;">Variance from imputation <em>i</em></td>
<td style="text-align: left;"><span class="math inline">\(SE^2\)</span> from that model</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(\bar{Q}\)</span></td>
<td style="text-align: left;">Mean of all <span class="math inline">\(Q_i\)</span></td>
<td style="text-align: left;">Final pooled estimate</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(\bar{U}\)</span></td>
<td style="text-align: left;">Mean of all <span class="math inline">\(U_i\)</span></td>
<td style="text-align: left;">Within-imputation variance</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(B\)</span></td>
<td style="text-align: left;">Between-imputation variance</td>
<td style="text-align: left;">Variability across datasets</td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(T\)</span></td>
<td style="text-align: left;">Total variance</td>
<td style="text-align: left;">Combined uncertainty</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(SE(\bar{Q})\)</span></td>
<td style="text-align: left;">Pooled standard error</td>
<td style="text-align: left;"><span class="math inline">\(\sqrt{T}\)</span>, used in inference</td>
</tr>
</tbody>
</table>
<p>Scikit-learn’s <code>IterativeImputer</code> class simplifies this process.</p>
<p>Example using the airquality data:</p>
<div id="69667f78" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.experimental <span class="im">import</span> enable_iterative_imputer </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> IterativeImputer</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables for imputation regression models</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>month_dummies <span class="op">=</span> [c <span class="cf">for</span> c <span class="kw">in</span> df.columns <span class="cf">if</span> c.startswith(<span class="st">"Month_"</span>)]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>num_cols <span class="op">=</span> [<span class="st">"Ozone"</span>, <span class="st">"Solar.R"</span>, <span class="st">"Wind"</span>, <span class="st">"Temp"</span>] <span class="op">+</span> month_dummies</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables for final regression omdel</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>x_vars <span class="op">=</span> [<span class="st">"Ozone"</span>, <span class="st">"Solar.R"</span>, <span class="st">"Wind"</span>] <span class="op">+</span> month_dummies</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>y_var <span class="op">=</span> <span class="st">"Temp"</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of imputations</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co"># To store results</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>coef_list, var_list <span class="op">=</span> [], []</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform MICE 10 times</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> m <span class="kw">in</span> <span class="bu">range</span>(M):</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    imp <span class="op">=</span> IterativeImputer(  <span class="co"># Performs chained equations </span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>        random_state<span class="op">=</span><span class="dv">42</span> <span class="op">+</span> m, <span class="co"># Different random seed every time</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        sample_posterior<span class="op">=</span><span class="va">True</span>, <span class="co"># Adds random noise</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        max_iter<span class="op">=</span><span class="dv">20</span> <span class="co"># Iterates thru models 20 times or until convergence</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    imputed <span class="op">=</span> imp.fit_transform(df[num_cols])</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    df_imp <span class="op">=</span> df.copy()</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    df_imp[num_cols] <span class="op">=</span> imputed</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> sm.add_constant(df_imp[x_vars])</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> df_imp[y_var]</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> sm.OLS(y, X).fit()</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    coef_list.append(model.params)</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    var_list.append(model.bse <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Rubin’s Rules</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>coefs_df <span class="op">=</span> pd.DataFrame(coef_list)</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>vars_df  <span class="op">=</span> pd.DataFrame(var_list)</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>Q_bar <span class="op">=</span> coefs_df.mean()</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>U_bar <span class="op">=</span> vars_df.mean()</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>B     <span class="op">=</span> coefs_df.var(ddof<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>T_var <span class="op">=</span> U_bar <span class="op">+</span> (<span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span><span class="op">/</span><span class="bu">len</span>(coef_list)) <span class="op">*</span> B</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>SE    <span class="op">=</span> np.sqrt(T_var)</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>pooled <span class="op">=</span> pd.DataFrame({<span class="st">"MI Coefficient"</span>: Q_bar.<span class="bu">round</span>(<span class="dv">4</span>),</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"MI Std_Error"</span>: SE.<span class="bu">round</span>(<span class="dv">4</span>)})</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pooled)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>         MI Coefficient  MI Std_Error
const           64.9348        2.2675
Ozone            0.0946        0.0211
Solar.R          0.0138        0.0054
Wind            -0.3213        0.1545
Month_6         11.2000        1.5068
Month_7         13.2032        1.5408
Month_8         13.8689        1.5867
Month_9          9.9381        1.4006</code></pre>
</div>
</div>
<p>Notice that the standard errors for this method are larger than those from the single imputation methods. This is good -&gt; we are correctly accounting for the increased uncertainty caused by missing data</p>
</section>
</section>
<section id="conclusion" class="level3" data-number="13.1.7">
<h3 data-number="13.1.7" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">13.1.7</span> Conclusion</h3>
<ul>
<li><p>Imputation is an excellent tool for producing valid inference from datasets with missing data</p></li>
<li><p>Before performing any type of imputation, you should get very familiar with your data and assess what type of missingness it exhibits</p></li>
<li><p>The model results generated from using MICE have less bias but increased variance</p></li>
</ul>
</section>
<section id="further-readings" class="level3" data-number="13.1.8">
<h3 data-number="13.1.8" class="anchored" data-anchor-id="further-readings"><span class="header-section-number">13.1.8</span> Further Readings</h3>
<ul>
<li><p><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC4638176/">Overview of Multiple Imputation</a></p></li>
<li><p><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC8426774/?utm_source">Multiple Imputation With Varying Proportions of Missing Data</a></p></li>
<li><p><a href="https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/s12874-017-0442-1?">Workflow of Performing Imputation</a></p></li>
</ul>
<!-- ## UMAP -->
</section>
</section>
<section id="uniform-manifold-approximation-and-projection" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="uniform-manifold-approximation-and-projection"><span class="header-section-number">13.2</span> Uniform Manifold Approximation and Projection</h2>
<p>This section was prepared by Mark Zhang, an undergraduate at UCONN.</p>
<section id="introduction-1" class="level3" data-number="13.2.1">
<h3 data-number="13.2.1" class="anchored" data-anchor-id="introduction-1"><span class="header-section-number">13.2.1</span> Introduction</h3>
<p>Uniform Manifold Approximation and Projection (UMAP) <span class="citation" data-cites="mcinnes2018umap">(<a href="99-references.html#ref-mcinnes2018umap" role="doc-biblioref">McInnes et al., 2018</a>)</span> is a powerful dimensionality reduction technique designed to visualize high-dimensional data in a low-dimensional space, such as 2D or 3D. Unlike linear methods like PCA, UMAP captures nonlinear structures, preserving local clusters while also maintaining the overall global patterns of the data. UMAP is utilized for clustering, data visualization, and data exploration.</p>
</section>
<section id="other-dimensionality-reduction-techniques" class="level3" data-number="13.2.2">
<h3 data-number="13.2.2" class="anchored" data-anchor-id="other-dimensionality-reduction-techniques"><span class="header-section-number">13.2.2</span> Other Dimensionality Reduction Techniques</h3>
<section id="principle-component-analysis-pca" class="level4" data-number="13.2.2.1">
<h4 data-number="13.2.2.1" class="anchored" data-anchor-id="principle-component-analysis-pca"><span class="header-section-number">13.2.2.1</span> Principle Component Analysis (PCA)</h4>
<ul>
<li>linear technique; projects data along directions of maximum variance.</li>
<li>Preserves global structure fairly well but may lose local neighborhood. details.</li>
<li>good for visualization of 2-3 PCs but cannot capture nonlinear structures.</li>
</ul>
</section>
<section id="t-distributed-stochastic-neighbor-embedding-t-sne" class="level4" data-number="13.2.2.2">
<h4 data-number="13.2.2.2" class="anchored" data-anchor-id="t-distributed-stochastic-neighbor-embedding-t-sne"><span class="header-section-number">13.2.2.2</span> t-distributed Stochastic Neighbor Embedding (t-SNE)</h4>
<ul>
<li>finds distances between pairs of points, maps onto t dist.</li>
<li>nonlinear technique; preserves local structure very well.</li>
<li>can distort global relationships.</li>
<li>often slower than UMAP for large datasets.</li>
</ul>
</section>
</section>
<section id="algorithm-approach-and-intuition" class="level3" data-number="13.2.3">
<h3 data-number="13.2.3" class="anchored" data-anchor-id="algorithm-approach-and-intuition"><span class="header-section-number">13.2.3</span> Algorithm Approach and Intuition</h3>
<p>UMAP is a <strong>graph-based dimensionality reduction algorithm</strong> rooted in algebraic topology. It represents data as a fuzzy graph and finds a low-dimensional embedding that preserves both <strong>local neighborhoods</strong> and <strong>global structure</strong>.</p>
<section id="mathematical-foundations" class="level4" data-number="13.2.3.1">
<h4 data-number="13.2.3.1" class="anchored" data-anchor-id="mathematical-foundations"><span class="header-section-number">13.2.3.1</span> Mathematical Foundations</h4>
<ol type="1">
<li><p><strong>Riemannian Manifold</strong> - UMAP assumes the data lies on a Riemannian manifold, a smoothly curved surface embedded in high-dimensional space.</p></li>
<li><p><strong>Simplicial Sets</strong> - From algebraic topology, a simplex is the simplest geometric building block (a point, line, triangle, etc.), and a simplicial complex describes how these pieces connect to form a space. Geometrically a k-simplex is a very simple way to build a k-dimensional object.</p></li>
</ol>
</section>
<section id="learning-the-manifold-structure" class="level4" data-number="13.2.3.2">
<h4 data-number="13.2.3.2" class="anchored" data-anchor-id="learning-the-manifold-structure"><span class="header-section-number">13.2.3.2</span> Learning the manifold structure</h4>
<p>UMAP builds a graph as a discrete approximation of the manifold’s structure. To aid in visualizing the concepts, I will show how they apply to a noisy sin wave data set.</p>
<div id="c76a5465" class="cell" data-message="false" data-execution_count="10">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-11-output-1.png" width="763" height="463" class="figure-img"></p>
<figcaption>Test data set of a noisy sin wave</figcaption>
</figure>
</div>
</div>
</div>
<p>How do we represent this data as a manifold? UMAP uses the concept of simplicial sets and topology and adapts them to <strong>fuzzy simplicial sets</strong> and metric space.</p>
<section id="finding-nearest-neighbors" class="level5" data-number="13.2.3.2.1">
<h5 data-number="13.2.3.2.1" class="anchored" data-anchor-id="finding-nearest-neighbors"><span class="header-section-number">13.2.3.2.1</span> Finding nearest neighbors</h5>
<p>For each point we find the nearest neighbors. The <code>nneighbors</code> hyperparameter controls how local or global we want our structure to be. A large amount of neighbors represent the manifold more accurately as a whole and a smaller number would capture fine details of the structure.</p>
<div id="df1957d6" class="cell" data-message="false" data-execution_count="11">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-12-output-1.png" width="763" height="463" class="figure-img"></p>
<figcaption>Fuzzy circles to 4th nearest neighbor</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="constructing-a-neighborhood-graph" class="level5" data-number="13.2.3.2.2">
<h5 data-number="13.2.3.2.2" class="anchored" data-anchor-id="constructing-a-neighborhood-graph"><span class="header-section-number">13.2.3.2.2</span> Constructing a neighborhood graph</h5>
<p>UMAP represents high-dimensional data as a <strong>fuzzy simplicial set</strong>, capturing the local connectivity of points. For each point, a fuzzy membership weight is assigned to its neighbors: <span class="math display">\[
w_{ij} = \exp\Bigg(-\frac{d_{ij} - \rho_i}{\sigma_i}\Bigg),
\]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(d_{ij}\)</span> is the distance between points <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>,</li>
<li><span class="math inline">\(\rho_i\)</span> is the distance to the closest neighbor of <span class="math inline">\(i\)</span>,</li>
<li><span class="math inline">\(\sigma_i\)</span> is a local scaling factor.</li>
</ul>
<p>In other words, each point adjusts its influence based on the local density of its neighborhood. Dense regions, where points are very close together, have smaller <span class="math inline">\(\sigma_i\)</span>, which reduces the weight of individual connections. Sparse regions, with points farther apart, have larger <span class="math inline">\(\sigma_i\)</span>. , increasing the weight of each connection.</p>
<p>Since <span class="math inline">\(w_{i \to j}\)</span> and <span class="math inline">\(w_{j \to i}\)</span> can differ, UMAP combines them using a probabilistic union:</p>
<p><span class="math display">\[
w_{ij}^{(final)} = w_{i \to j} + w_{j \to i} - w_{i \to j} \cdot w_{j \to i}.
\]</span></p>
<p>This produces a symmetric weight between 0 and 1 that preserves local topology, balances contributions across dense and sparse regions, and yields a <strong>uniform manifold</strong> representation.</p>
<div id="8543b301" class="cell" data-message="false" data-execution_count="12">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-13-output-1.png" width="763" height="463" class="figure-img"></p>
<figcaption>Fuzzy weighted graph with UMAP-style combined weights</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="finding-a-low-dimensional-representation" class="level4" data-number="13.2.3.3">
<h4 data-number="13.2.3.3" class="anchored" data-anchor-id="finding-a-low-dimensional-representation"><span class="header-section-number">13.2.3.3</span> Finding a low-dimensional representation</h4>
<p>After building the fuzzy simplicial set (the weighted neighborhood graph), UMAP tries to embed the points in a low-dimensional space (e.g., 2D or 3D) while preserving the relationships encoded in the graph. This is done by optimizing a cost function.</p>
<section id="minimum-distance" class="level5" data-number="13.2.3.3.1">
<h5 data-number="13.2.3.3.1" class="anchored" data-anchor-id="minimum-distance"><span class="header-section-number">13.2.3.3.1</span> Minimum Distance</h5>
<p>The <code>min_dist</code> parameter controls how close points can be in the low-dimensional embedding:</p>
<ul>
<li><strong>Small <code>min_dist</code></strong> - points can be closer together, resulting in <strong>dense clusters</strong> that preserve fine local structure.<br>
</li>
<li><strong>Large <code>min_dist</code></strong> - points are forced farther apart, producing <strong>spread-out clusters</strong> that highlight global relationships.</li>
</ul>
<p>In other words, <code>min_dist</code> adjusts the <strong>tightness of clusters</strong> in the embedding without changing the underlying topology of the data.</p>
</section>
<section id="minimizing-the-cost-function-cross-entropy" class="level5" data-number="13.2.3.3.2">
<h5 data-number="13.2.3.3.2" class="anchored" data-anchor-id="minimizing-the-cost-function-cross-entropy"><span class="header-section-number">13.2.3.3.2</span> Minimizing the cost function (Cross-Entropy)</h5>
<p>After constructing the fuzzy simplicial set and initializing the low-dimensional embedding, UMAP positions the points by <strong>minimizing a cross-entropy-like cost function</strong>:</p>
<p>To compute the similarity between points in the low-dimensional embedding, UMAP defines a corresponding low-dimensional weight for each pair of points:</p>
<p><span class="math display">\[
w_{ij}^{(\text{low})} = \frac{1}{1 + a \|y_i - y_j\|^{2b}},
\]</span></p>
<p>where:</p>
<ul>
<li><span class="math inline">\(\|y_i - y_j\|\)</span> is the Euclidean distance between points <span class="math inline">\(y_i\)</span> and <span class="math inline">\(y_j\)</span> in the low-dimensional space (2D or 3D),</li>
<li><span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are hyperparameters that control the shape of the attraction/repulsion curve.</li>
</ul>
<p>The cross-entropy cost function is then defined as: <span class="math display">\[
C = \sum_{i \neq j} \Big[ w_{ij} \log \frac{1}{w_{ij}^{(\text{low})}} +
(1 - w_{ij}) \log \frac{1}{1 - w_{ij}^{(\text{low})}} \Big],
\]</span> where: - <span class="math inline">\(w_{ij}\)</span> = high-dimensional fuzzy weight between points <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>, - <span class="math inline">\(w_{ij}^{(\text{low})}\)</span> = corresponding low-dimensional embedding weight.</p>
<p><strong>Intuition:</strong></p>
<ol type="1">
<li>If two points are <strong>strongly connected</strong> in high dimensions (large <span class="math inline">\(w_{ij}\)</span>), the embedding tries to place them <strong>close together</strong>.<br>
</li>
<li>If two points are <strong>weakly connected</strong> (small <span class="math inline">\(w_{ij}\)</span>), the embedding tries to place them <strong>far apart</strong>.</li>
</ol>
<p>UMAP uses <strong>stochastic gradient descent</strong> to minimize this cost function, adjusting the coordinates of points in low dimensions so that the embedding preserves both <strong>local neighborhoods</strong> and <strong>global manifold structure</strong>.</p>
</section>
</section>
</section>
<section id="practical-example-umap-on-28x28-digit-data" class="level3" data-number="13.2.4">
<h3 data-number="13.2.4" class="anchored" data-anchor-id="practical-example-umap-on-28x28-digit-data"><span class="header-section-number">13.2.4</span> Practical Example: UMAP on 28x28 digit data</h3>
<p>First, install the necessary dependency:</p>
<p><code>pip install umap-learn</code></p>
<p>Before applying UMAP, let’s look at the raw data. The MNIST dataset from scikit-learn contains 70,000 images of handwritten digits, each represented as a 28×28 grayscale image (784 features per sample).</p>
<div id="c7b1f1c9" class="cell" data-message="false" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.datasets <span class="im">import</span> fetch_openml</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load MNIST</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>mnist <span class="op">=</span> fetch_openml(<span class="st">"mnist_784"</span>, version<span class="op">=</span><span class="dv">1</span>, as_frame<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> mnist.data[:<span class="dv">2000</span>]</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> mnist.target[:<span class="dv">2000</span>].astype(<span class="bu">int</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape to 28×28 images</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>images <span class="op">=</span> X.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">28</span>, <span class="dv">28</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Show first 12 digits in a 3×4 grid</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">3</span>, <span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">6</span>))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, ax <span class="kw">in</span> <span class="bu">enumerate</span>(axes.flat):</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    ax.imshow(images[i], cmap<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    ax.set_title(y[i])</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    ax.axis(<span class="st">'off'</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-14-output-1.png" width="566" height="528" class="figure-img"></p>
<figcaption>Handwritten digit images (28×28) from MNIST dataset</figcaption>
</figure>
</div>
</div>
</div>
<p>We now project the 784-dimensional data into a 2D embedding using UMAP. The parameters below control the embedding:</p>
<ul>
<li><p>n_neighbors: how many nearby points are used to estimate local structure.</p></li>
<li><p>min_dist: how tightly UMAP packs points in the low-dimensional space.</p></li>
</ul>
<div id="cell-umap-mnist-2d" class="cell" data-message="false" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> umap.umap_ <span class="im">import</span> UMAP</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.datasets <span class="im">import</span> fetch_openml</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Load MNIST</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>mnist <span class="op">=</span> fetch_openml(<span class="st">"mnist_784"</span>, version<span class="op">=</span><span class="dv">1</span>, as_frame<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> mnist.data[:<span class="dv">2000</span>]</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> mnist.target[:<span class="dv">2000</span>].astype(<span class="bu">int</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2D UMAP projection</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>reducer <span class="op">=</span> UMAP(</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    n_components<span class="op">=</span><span class="dv">2</span>,</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    n_neighbors<span class="op">=</span><span class="dv">15</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    min_dist<span class="op">=</span><span class="fl">0.1</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    random_state<span class="op">=</span><span class="dv">42</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>X_umap <span class="op">=</span> reducer.fit_transform(X)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 2D scatter plot</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>scatter <span class="op">=</span> plt.scatter(</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    X_umap[:, <span class="dv">0</span>], X_umap[:, <span class="dv">1</span>],</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    c<span class="op">=</span>y, cmap<span class="op">=</span><span class="st">'tab10'</span>, s<span class="op">=</span><span class="dv">5</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"2D UMAP projection of MNIST (28×28)"</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"UMAP 1"</span>)</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"UMAP 2"</span>)</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>plt.colorbar(scatter, label<span class="op">=</span><span class="st">'Digit'</span>)</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="umap-mnist-2d" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="90-advanced_files/figure-html/umap-mnist-2d-output-1.png" width="631" height="523" class="figure-img"></p>
<figcaption>2D UMAP of MNIST dataset</figcaption>
</figure>
</div>
</div>
</div>
<p>In the 2D UMAP embedding of the digits dataset, each point represents a digit image, colored by its label. The plot shows that UMAP successfully captures the structure of high-dimensional data: points of the same digit cluster tightly, while visually similar digits appear near each other, preserving meaningful relationships.</p>
<ul>
<li><strong>Same digits</strong> - form tight clusters, showing that UMAP preserves <strong>local neighborhood structure</strong> and keeps similar points together.<br>
</li>
<li><strong>Similar digits</strong> (e.g., 3 &amp; 8) - positioned near each other, reflecting their <strong>visual similarity</strong> in shape and style.<br>
</li>
<li><strong>Different clusters</strong> - mostly separate, indicating <strong>clear class separation</strong> and that UMAP maintains distinctions between digit types.<br>
</li>
<li><strong>Global layout</strong> - reflects the relative positions of all clusters , preserving <strong>overall structure</strong> of the dataset.</li>
</ul>
<blockquote class="blockquote">
<p><strong>Takeaway:</strong> UMAP reveals both <strong>local and global patterns</strong>, making high-dimensional data interpretable in 2D.</p>
</blockquote>
</section>
<section id="conclusion-1" class="level3" data-number="13.2.5">
<h3 data-number="13.2.5" class="anchored" data-anchor-id="conclusion-1"><span class="header-section-number">13.2.5</span> Conclusion</h3>
<p>UMAP is a nonlinear dimensionality reduction technique that effectively captures both <strong>local and global structure</strong> in high-dimensional data. By constructing a fuzzy neighborhood graph and optimizing a low-dimensional embedding, it preserves cluster relationships, highlights visually similar points, and maintains overall manifold structure. This makes UMAP a powerful, interpretable tool for <strong>visualization and exploratory data analysis</strong>.</p>
</section>
<section id="further-readings-1" class="level3" data-number="13.2.6">
<h3 data-number="13.2.6" class="anchored" data-anchor-id="further-readings-1"><span class="header-section-number">13.2.6</span> Further Readings</h3>
<ul>
<li><a href="https://par.nsf.gov/biblio/10104557">UMAP Paper</a></li>
</ul>
<!-- ## Calling R from Python -->
</section>
</section>
<section id="how-to-call-r-from-python" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="how-to-call-r-from-python"><span class="header-section-number">13.3</span> How to call R from Python</h2>
<p>This section was prepared by Wilson Tang, a undergraduate junior as of fall 2025 pursuing a single degree in statistical data science.</p>
<section id="motivations" class="level3" data-number="13.3.1">
<h3 data-number="13.3.1" class="anchored" data-anchor-id="motivations"><span class="header-section-number">13.3.1</span> Motivations</h3>
<p>R and Python are both languages we have been exposed to the most at UConn. I’ve had moments using one where I think about how the other might be useful, and so one might want to incorporate both languages. I want to show how we can properly incorporate R and Python together and when each language may be better.</p>
<p><strong>Data science workflow:</strong></p>
<p>Understanding the data science workflow will help us decide if we want to use R and Python together, or just individually.</p>
<ul>
<li>Identify problem<br>
</li>
<li>Gather data<br>
</li>
<li>Clean &amp; preprocess data<br>
</li>
<li>Data exploration<br>
</li>
<li>Feature engineering / external data</li>
<li>Statistical testing<br>
</li>
<li>Modeling &amp; machine learning<br>
</li>
<li>Evaluation<br>
</li>
<li>Visualization</li>
</ul>
</section>
<section id="corresponding-packages" class="level3" data-number="13.3.2">
<h3 data-number="13.3.2" class="anchored" data-anchor-id="corresponding-packages"><span class="header-section-number">13.3.2</span> Corresponding packages</h3>
<p>For most tasks, we can find corresponding packages in both Python and R that can generally accomplish the same tasks. Of course, do mind exceptions can occur for very specific tasks and you should make decisions based on the scope of your work.</p>
<ul>
<li><strong>Cleaning / Preprocessing Data</strong>
<ul>
<li>R: dplyr</li>
<li>Python: pandas</li>
</ul></li>
<li><strong>Exploratory Data Analysis</strong>
<ul>
<li>R: built-in functions, dplyr, ggplot2</li>
<li>Python: pandas, matplotlib, seaborn, plotnine</li>
</ul></li>
<li><strong>Feature Engineering</strong>
<ul>
<li>R: recipes (tidymodels), forcats, lubridate</li>
<li>Python: sklearn, pandas</li>
</ul></li>
<li><strong>Evaluation</strong>
<ul>
<li>R: yardstick, caret</li>
<li>Python: sklearn, yellowbrick</li>
</ul></li>
<li><strong>Visualization</strong>
<ul>
<li>R: ggplot2</li>
<li>Python: plotnine, matplotlib, seaborn</li>
</ul></li>
</ul>
</section>
<section id="r-python-advantages" class="level3" data-number="13.3.3">
<h3 data-number="13.3.3" class="anchored" data-anchor-id="r-python-advantages"><span class="header-section-number">13.3.3</span> R / Python advantages</h3>
<p><strong>R:</strong></p>
<ul>
<li>Statistical testing: t-test, ANOVA, chi-squared, Shapiro-wilk are common tests built into R. Durbin Test and a fisher’s test that can work for any r x c contingency table.</li>
<li>Econometrics, time-series and biostatistics.</li>
</ul>
<p><strong>Python:</strong></p>
<ul>
<li>Being able to handle bigger data</li>
<li>Machine learning and AI
<ul>
<li>sklearn for machine learning</li>
<li>Tensor flow / Keras / Pytorch for deep learning</li>
<li>XGBoost / LightGBM / CatBoost for gradient boosting</li>
<li>Pipelines<br>
</li>
</ul></li>
<li>Versatile data handling
<ul>
<li>APIs - Better for large scale / complex integration (‘requests’, ‘httpx’, ‘aiohttp’)</li>
<li>Web Scraping - Better for large scale / dynamic web scraping (‘Beautiful’, ‘Scrapy’, ‘Selenium’)</li>
<li>Databases - SQL, NoSQL and big platforms</li>
<li>Cloud data - R has limited options for this and sometimes rely on Python libraries</li>
<li>Real-time data - R can’t really do this</li>
</ul></li>
</ul>
</section>
<section id="setup-both-r-and-python" class="level3" data-number="13.3.4">
<h3 data-number="13.3.4" class="anchored" data-anchor-id="setup-both-r-and-python"><span class="header-section-number">13.3.4</span> Setup both R and Python</h3>
<p><strong>Make sure you have your own python:</strong></p>
<p>Windows comes with python, however we want to install our own because it will prevent errors in the future steps. (Microsoft sucks)</p>
<p><a href="https://www.python.org/downloads/">Install python</a></p>
<p><strong>Download R and Install R extension:</strong></p>
<p><a href="https://cran.r-project.org/bin/windows/base/">Install R</a></p>
<p>Find the Extensions tab on the left toolbar, search R language and install the R extension for VS code. And you can use <code>Ctrl+Shift+P</code> and type <code>R: Create R terminal</code>.</p>
<p><strong>Calling R in Python:</strong></p>
<p>We will use the package <code>rpy2</code> to call R from Python, there are also other packages that can call R, check <a href="#more-resources">Additional resources</a>.</p>
<p>Calling R from Python is a Python first method, and is generally recommended if the user is going to be using more python. However, one can also call Python from R as well. Check <a href="#more-resources">Additional resources</a> for packages in R that allows us to call Python from R.</p>
<p><strong>Reproducibility:</strong></p>
<p>Since we are trying to use 2 languages at once, there will be packages from both R and Python. Of course, we would never want to compromise on reproducibility so what should we do? The best method would be to use Conda.</p>
<p>A single Conda environment can specify both versions of Python as well as R, while also allowing us to keep the packages of both in one place.</p>
</section>
<section id="example" class="level3" data-number="13.3.5">
<h3 data-number="13.3.5" class="anchored" data-anchor-id="example"><span class="header-section-number">13.3.5</span> Example</h3>
<p><strong>Prerequisites:</strong></p>
<p>In order to render these classnotes you will need to have a Python virtual environment with packages from <a href="https://github.com/statds/ids-f25/blob/main/requirements.txt">requirements.txt</a> and the package <code>gamlss</code> needs to be installed into your R global environment.</p>
<p><code>GAMLSS</code> or Generalized Additive Models for Location, Scale, and Shape. It allows all parameters of the response distribution to depend on explanatory variables and thus each parameter can be modeled as a function of predictors. This model is useful when variability changes with predictors, skewness / kurtosis change with predictors.</p>
<p>Load Python libraries:</p>
<div id="c8dd414f" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Load <code>rpy2</code> to call R interface:</p>
<div id="0a2e056e" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rpy2 <span class="im">import</span> robjects</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rpy2.robjects <span class="im">import</span> pandas2ri, Formula</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rpy2.robjects.packages <span class="im">as</span> rpackages</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rpy2.robjects.conversion <span class="im">import</span> localconverter</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Error importing in API mode: ImportError("dlopen(/Users/junyan/work/teaching/ids-f25/ids-f25/.ids-f25/lib/python3.13/site-packages/_rinterface_cffi_api.abi3.so, 0x0002): symbol not found in flat namespace '_R_BaseEnv'")
Trying to import in ABI mode.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Loading custom .RprofileLoading custom .Rprofile</code></pre>
</div>
</div>
<p>Call <code>gamlss</code> from <code>rpy2</code>, <code>rpy2</code> will look for the R global environment is the default location:</p>
<div id="23710183" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>gamlss <span class="op">=</span> rpackages.importr(<span class="st">'gamlss'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Load in <code>penguins</code> from <code>seaborn</code> and prepare Data:</p>
<div id="17c6075c" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="op">=</span> sns.load_dataset(<span class="st">"penguins"</span>).dropna()</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="op">=</span> penguins.rename(columns<span class="op">=</span>{</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"body_mass_g"</span>: <span class="st">"mass"</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"bill_length_mm"</span>: <span class="st">"bill"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"flipper_length_mm"</span>: <span class="st">"flipper"</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>penguins <span class="op">=</span> penguins[[<span class="st">"mass"</span>, <span class="st">"bill"</span>, <span class="st">"flipper"</span>, <span class="st">"species"</span>, <span class="st">"sex"</span>]]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Send data frame from <code>pandas</code> to R and have it be converted to a R data frame using <code>rpy2</code>:</p>
<div id="a12dc772" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> localconverter(robjects.default_converter <span class="op">+</span> pandas2ri.converter):</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    r_df <span class="op">=</span> robjects.conversion.py2rpy(penguins)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Here we are saying that <code>mass</code> depends on <code>flipper</code>, <code>bill</code>, <code>species</code>, <code>sex</code> and the variability of <code>mass</code> depends on <code>flipper</code>. Run <code>gamlss</code> from the R data frame to extract whatever we need from <code>gamlss</code>, in this case fitted <span class="math inline">\(\sigma\)</span>:</p>
<div id="16573c1d" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>formula_mu <span class="op">=</span> Formula(<span class="st">"mass ~ flipper + bill + species + sex"</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>formula_sigma <span class="op">=</span> Formula(<span class="st">"~ flipper"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> gamlss.gamlss(formula_mu, sigma_formula<span class="op">=</span>formula_sigma,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                      data<span class="op">=</span>r_df, family<span class="op">=</span><span class="st">"NO"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>fitted_sigma <span class="op">=</span> robjects.r(<span class="st">"fitted.values"</span>)(model, <span class="st">"sigma"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>GAMLSS-RS iteration 1: Global Deviance = 4718.449 
GAMLSS-RS iteration 2: Global Deviance = 4718.415 
GAMLSS-RS iteration 3: Global Deviance = 4718.415 </code></pre>
</div>
</div>
<p>Send fitted values or anything extracted from the previous part:</p>
<div id="5ee3240c" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> localconverter(robjects.default_converter <span class="op">+</span> pandas2ri.converter):</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    penguins[<span class="st">"fitted_sigma"</span>] <span class="op">=</span> robjects.conversion.rpy2py(fitted_sigma)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Use extracted values for anything of interest in Python, in this case let’s say for some reason we wanted to use <code>matplotlib</code> and <code>seaborn</code> to plot our fitted <span class="math inline">\(\sigma\)</span>:</p>
<div id="194a2bbc" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x<span class="op">=</span><span class="st">"flipper"</span>, y<span class="op">=</span><span class="st">"fitted_sigma"</span>, hue<span class="op">=</span><span class="st">"species"</span>, data<span class="op">=</span>penguins, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                alpha<span class="op">=</span><span class="fl">0.6</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span><span class="st">"flipper"</span>, y<span class="op">=</span><span class="st">"fitted_sigma"</span>, hue<span class="op">=</span><span class="st">"species"</span>, data<span class="op">=</span>penguins, lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"GAMLSS: Predicted Variability vs Flipper Length"</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Flipper Length (mm)"</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Predicted Body Mass Variability (grams)"</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"Species"</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="90-advanced_files/figure-html/cell-23-output-1.png" width="668" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We see here that as flipper length increases, predicted body mass variability tends to decrease.</p>
</section>
<section id="more-resources" class="level3" data-number="13.3.6">
<h3 data-number="13.3.6" class="anchored" data-anchor-id="more-resources"><span class="header-section-number">13.3.6</span> Additional resources</h3>
<ul>
<li><p><a href="https://www.datacamp.com/tutorial/using-both-python-r">More packages to call R in Python and vice versa</a></p></li>
<li><p><a href="https://www.business-science.io/business/2018/10/08/python-and-r.html">More about Python / R strengths and workflow with conda</a></p></li>
</ul>
<!-- ## Making Personal Webpage on GitHub Pages -->
</section>
</section>
<section id="making-a-personal-webpage-on-github-pages" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="making-a-personal-webpage-on-github-pages"><span class="header-section-number">13.4</span> Making a Personal Webpage on GitHub Pages</h2>
<p>This guide will walk you through the process of creating your own personal website using GitHub Pages and Jekyll. We will cover setup to publishing and customizing the look of your site.</p>
<hr>
<section id="introduction-2" class="level3" data-number="13.4.1">
<h3 data-number="13.4.1" class="anchored" data-anchor-id="introduction-2"><span class="header-section-number">13.4.1</span> Introduction</h3>
<p>My name is Jaden Mayer-Costa. I am a senior pursuing a Statistical Data Analysis degree with minors in both Economics and Music.</p>
<p>By the end of this guide, you should have the knowledge to create your own live site.</p>
<hr>
</section>
<section id="why-use-github-pages" class="level3" data-number="13.4.2">
<h3 data-number="13.4.2" class="anchored" data-anchor-id="why-use-github-pages"><span class="header-section-number">13.4.2</span> Why Use GitHub Pages?</h3>
<p>GitHub Pages lets you host a website directly from your GitHub repository for free.<br>
It’s ideal for portfolios, academic profiles, or blogs.</p>
<p><strong>Key benefits:</strong></p>
<ul>
<li>Free hosting with your own custom URL (<code>username.github.io</code>)</li>
<li>Seamless integration with GitHub</li>
<li>Built-in support for Jekyll, a static site generator</li>
<li>No server or databases required</li>
</ul>
<hr>
<p>What is Jekyll?</p>
<p><a href="https://jekyllrb.com/">Jekyll</a> is a static site generator that can turn Markdown files into a lightweight website.</p>
<ul>
<li>Uses Markdown, templates, HTML, and CSS</li>
<li>Generates static pages that load quickly</li>
<li>Works easily with GitHub Pages</li>
<li>Supports blogs, portfolios, and documentation sites</li>
</ul>
<p><strong>Why use it?</strong></p>
<ul>
<li>You write simple Markdown → Jekyll reads and builds HTML → then push to GitHub Pages to host the site.</li>
</ul>
<hr>
</section>
<section id="setting-up-jekyll-locally" class="level3" data-number="13.4.3">
<h3 data-number="13.4.3" class="anchored" data-anchor-id="setting-up-jekyll-locally"><span class="header-section-number">13.4.3</span> Setting Up Jekyll locally</h3>
<p>First must install Ruby</p>
<p>Ruby is what Jekyll is written in and is necessary to download. You do not have to code in Ruby to use Jekyll, but it is what is running everything behind the scenes.</p>
<ol type="1">
<li><p>Visit <a href="https://rubyinstaller.org/downloads/">RubyInstaller.org</a></p></li>
<li><p>Download the latest <strong>Ruby + Devkit</strong> version.</p></li>
<li><p>Run the installer and choose:</p>
<ul>
<li><strong>MSYS2 and MINGW development toolchain</strong></li>
</ul></li>
<li><p>After installation, open a new Command Prompt and check to ensure download was successful:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ruby <span class="op">-</span>v</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr></li>
</ol>
<p>Next, install Jekyll and Bundler from ruby</p>
<p>In terminal run</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>gem install jekyll bundler</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>What is a gem?:</strong> A gem is a Ruby package that basically represents a bunch of code or functionality that can be reused. Jekyll is an example of a gem.</p>
<p>Verify installation</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>jekyll <span class="op">-</span>v</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p>Finally, create a new Jekyll site</p>
<p>In terminal run</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>jekyll new personal-site</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Jekyll will add all the necessary files for your site to run properly.</p>
<hr>
<p>Run locally before pushing</p>
<p>Navigate to the personal-site file and preview your site locally by executing the code below.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>jekyll new personal-site</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cd</span> personal-site</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>bundle exec jekyll serve</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>bundle exec is a command that runs a tool, in this case Jekyll, using the gems listed in the Gemfile.</p>
<p>After running and provided there are no errors, you Can then visit <a href="http://localhost:4000">http://localhost:4000</a> to see your website.</p>
<p><strong>What is bundler?</strong> bundler is a tool used to manage Ruby gems. It helps ensure your project uses the right versions of each gem that is listed in your Gemfile</p>
<p><strong>What is a Gemfile?</strong> A Gemfile is simply a plain text file that lists all the Ruby gems your project needs in order to run. It is similar to what would be a “requirements.txt” file in Python. Essential to have for reproducibility.</p>
<p><strong>Note:</strong> It is good practice to run your website locally before pushing to GitHub Pages to make sure your website will run before you make changes. Failure to check could result in a broken website.</p>
</section>
<section id="pushing-to-github-pages" class="level3" data-number="13.4.4">
<h3 data-number="13.4.4" class="anchored" data-anchor-id="pushing-to-github-pages"><span class="header-section-number">13.4.4</span> Pushing to GitHub Pages</h3>
<p>Create a GitHub repository to host files for website</p>
<ul>
<li>Go to <a href="https://github.com/">GitHub</a></li>
<li>Create a repository called: YOUR-USERNAME.github.io</li>
</ul>
<hr>
<p>Next, push your locally created site to GitHub</p>
<p>In terminal from the project folder run each of the following:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>git init</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>git add <span class="op">.</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>git commit <span class="op">-</span>m <span class="st">"GitHub Pages site made with Jekyll"</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>git branch <span class="op">-</span>M test</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>git remote add origin https<span class="op">://</span>github<span class="op">.</span><span class="fu">com</span><span class="op">/</span>username<span class="op">/</span>username<span class="op">.</span><span class="fu">github</span><span class="op">.</span><span class="fu">io</span><span class="op">.</span><span class="fu">git</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>git push <span class="op">-</span>u origin main</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Enable GitHub Pages on your repository</p>
<ul>
<li>Go to repository on GitHUb</li>
<li>Go to Settings then click on pages</li>
<li>Under “Source” click the test branch and / (root) folder</li>
<li>Click Save - now website will be live at https://YOUR-USERNAME/github.io</li>
</ul>
</section>
<section id="customizing-your-page" class="level3" data-number="13.4.5">
<h3 data-number="13.4.5" class="anchored" data-anchor-id="customizing-your-page"><span class="header-section-number">13.4.5</span> Customizing Your Page</h3>
<p>Now that your site is live, you can design and add personal touches. Jekyll gives control of layout, theme, colors, and structure while using simple files.</p>
<p><strong>Standard layout</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="at">personal-website/</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="at">    _posts</span><span class="co">   # Blog posts</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="at">    _site</span><span class="co">   # Auto generated output</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="at">    .jekyll-cache</span><span class="co">   #Build cache</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="at">    _config.yml</span><span class="co">     # Main config file (controls theme, title, etc.)</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="at">    .gitignore</span><span class="co">      # Files git should ignore</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="at">    404.html</span><span class="co">    # Custom error page</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="at">    about.markdown</span><span class="co">      # About page</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="at">    Gemfile</span><span class="co">     # Lists Ruby dependencies</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="at">    Gemfile.lock</span><span class="co">    # Auto-generated dependency lock file</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="at">    index.markdown</span><span class="co">      # Homepage</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p>Some different page types:</p>
<p><strong>About Page:</strong></p>
<ul>
<li>You can open about.markdown and edit this file to include a descriptive statement about yourself.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="an">layout:</span><span class="co"> page</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> About</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="an">permalink:</span><span class="co"> /about/</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>Hello, my name is Jaden Mayer-Costa and I ...</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Homepage:</strong></p>
<ul>
<li>index.markdown is the landing page for your website. In other words this is the first thing that will be seen when visiting your site.</li>
<li>Blog posts will appear here as well.</li>
</ul>
<p><strong>Blog Post:</strong></p>
<ul>
<li>To add a new post navigate to your posts folder, add a markdown file, making sure to name it in YYYY-MM-DD-title.markdown format. Then in the yaml follow this template.</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">layout</span><span class="kw">:</span><span class="at"> post</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at">  </span><span class="st">"title"</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at">   YYYY-MM-DD HH-MM-SS</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">categories</span><span class="kw">:</span><span class="at"> jekyll update</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>If you do not specify the date, Jekyll will not render the post.</li>
</ul>
<hr>
<p><strong>Adding photos:</strong></p>
<ul>
<li>Create an assets folder in your project root.</li>
<li>Create a img folder in your assets folder and simply drop whatever pictures you want into your website there.</li>
<li>To render a photo ensure it is in a jpg or png format.</li>
<li>Here is the syntax to embed a picture:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode powershell code-with-copy"><code class="sourceCode powershell"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="op">![</span>file_name<span class="op">]({{</span> <span class="st">'/assets/img/file_name'</span> <span class="op">|</span> relative_url <span class="op">}})</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This tells Jekyll where to find your picture.</p>
<hr>
</section>
<section id="themes" class="level3" data-number="13.4.6">
<h3 data-number="13.4.6" class="anchored" data-anchor-id="themes"><span class="header-section-number">13.4.6</span> Themes</h3>
<p>Jekyll has many different themes that allow you quickly restyle your site. By default Jekyll will use the minima theme, but if you go into the _config file, you can switch out to a different one, such as Cayman or Midnight. A more exhaustive list can be found on <a href="https://github.com/topics/jekyll-theme">GitHub Pages</a></p>
<p>Minima is a good theme for beginners because it has everything we need to make a website without the need to create our own layouts, which can be time intensive. That’s why for the purposes of this tutorial, we will stick with minima.</p>
<p><strong>Note:</strong> It is vital to pick a theme you like before building your website. Different themes have different layouts and dependencies, meaning you cannot easily change themes once a website is published.</p>
</section>
<section id="understanding-layouts-in-minima" class="level3" data-number="13.4.7">
<h3 data-number="13.4.7" class="anchored" data-anchor-id="understanding-layouts-in-minima"><span class="header-section-number">13.4.7</span> Understanding Layouts in minima</h3>
<p>Layouts are HTML templates that define how your pages and posts look. Having one is important to serve as a reusable frame or structure. Minima comes with four different layout options built in:</p>
<ul>
<li>default (Base HTML frame for all pages)</li>
<li>home (lists posts on the homepage)</li>
<li>page (Used for static pages like for an About or Project section)</li>
<li>post (Individual blog posts)</li>
</ul>
<p><strong>Note:</strong> It is possible to override a layout by creating a custom _layouts folder where you can further customize your pages as desired. This is beyond the scope of this tutorial as it involves writing html code.</p>
<hr>
<p><strong>Adding New Tabs:</strong></p>
<p>Say that we wanted to add a new tab to showcase the projects we have been working on in this class.</p>
<ul>
<li><p>We can create a projects.markdown file in our root folder.</p></li>
<li><p>In the yaml add:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">layout</span><span class="kw">:</span><span class="at"> page</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Projects</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">permalink</span><span class="kw">:</span><span class="at"> /projects/</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div></li>
<li><p>Add markdown content underneath.</p></li>
</ul>
</section>
<section id="customize-_config.yml" class="level3" data-number="13.4.8">
<h3 data-number="13.4.8" class="anchored" data-anchor-id="customize-_config.yml"><span class="header-section-number">13.4.8</span> Customize _config.yml</h3>
<p>The _config file is where site settings are hosted. Things like title, URL, theme, and necessary plugins. Minima will automatically put a generic yaml to be filled out by the user. An example of a _config.yml setup is as follows:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preliminary information</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Personal Webpage on GitHub"</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Jaden Mayer-Costa"</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">email</span><span class="kw">:</span><span class="at"> </span><span class="st">"your@email.com"</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">"Data Analyst | Economist | Musician"</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">baseurl</span><span class="kw">:</span><span class="at"> </span><span class="st">""</span><span class="co"> # leave empty for main site</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">url</span><span class="kw">:</span><span class="at"> </span><span class="st">"https://jaden-m-c.github.io"</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Theme and plugins (pulling minima theme)</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span><span class="at"> minima</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plugins</span><span class="kw">:</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> jekyll-feed</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> jekyll-seo-tag</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Navigation links in the header</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="fu">header_pages</span><span class="kw">:</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> about.markdown</span></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> projects.markdown</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> blog.markdown</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Social media links</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a><span class="fu">minima</span><span class="kw">:</span></span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">social_links</span><span class="kw">:</span></span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">github</span><span class="kw">:</span><span class="at"> jaden-m-c</span></span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">linkedin</span><span class="kw">:</span><span class="at"> your-linkedin</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="changing-colors-and-fonts" class="level3" data-number="13.4.9">
<h3 data-number="13.4.9" class="anchored" data-anchor-id="changing-colors-and-fonts"><span class="header-section-number">13.4.9</span> Changing colors and fonts</h3>
<p>It is possible to make edits to a themes font and color without changing the entire theme through the use of a Cascading Style Sheet or CSS file.</p>
<ul>
<li>Create a file inside your assets folder called main.scss</li>
<li>Import minima base styles into file:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode scss code-with-copy"><code class="sourceCode scss"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="im">@import</span> <span class="st">"minima"</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li>Now can override original styles. Below example makes changes to the font weight, style, color, even footer background:</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode scss code-with-copy"><code class="sourceCode scss"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Custom site styling</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>body {</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-color</span>: <span class="cn">#fafafa</span><span class="op">;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">#222</span><span class="op">;</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-family</span>: <span class="st">"Inter"</span><span class="op">,</span> <span class="st">"Helvetica Neue"</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>a {</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">#0057b7</span><span class="op">;</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="fu">.site-title</span> {</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-weight</span>: <span class="dv">700</span><span class="op">;</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span>: <span class="dv">2</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-transform</span>: <span class="dv">uppercase</span><span class="op">;</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>footer {</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span>: <span class="cn">#111</span><span class="op">;</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span>: <span class="dv">1</span><span class="dt">em</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="conclusion-2" class="level3" data-number="13.4.10">
<h3 data-number="13.4.10" class="anchored" data-anchor-id="conclusion-2"><span class="header-section-number">13.4.10</span> Conclusion</h3>
<p>You should know have the knowledge to set up a personal site on GitHub Pages using Jekyll. And any time you need to make an update, you can follow the workflow of makings edits and rendering locally before pushing to Pages. In this way, your page can evolve alongside your career. This overview is the basic setup to get a page, but there are truly so many ways to customize and edit your page to better reflect your personality and style.</p>
</section>
<section id="further-reading" class="level3" data-number="13.4.11">
<h3 data-number="13.4.11" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">13.4.11</span> Further Reading</h3>
<ul>
<li><a href="https://jekyllrb.com/docs/github-pages/">Using Jekyll in GitHub Pages</a></li>
<li><a href="https://jekyllrb.com/docs/themes/">Using themes from Jekyll</a></li>
<li><a href="https://docs.github.com/en/pages/getting-started-with-github-pages/what-is-github-pages">GitHub Pages breakdown</a></li>
<li><a href="https://github.com/topics/jekyll-theme">Resource to find themes for webpage</a></li>
</ul>
<!-- ## Web Scraping -->
</section>
</section>
<section id="web-scraping" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="web-scraping"><span class="header-section-number">13.5</span> Web Scraping</h2>
<p>This section was prepared by Sahil Patel, an undergraduate junior majoring in Computer Science, Statistical Data Science, and Economics.</p>
<section id="an-introduction-to-web-scraping" class="level3" data-number="13.5.1">
<h3 data-number="13.5.1" class="anchored" data-anchor-id="an-introduction-to-web-scraping"><span class="header-section-number">13.5.1</span> An Introduction to Web Scraping</h3>
<section id="what-is-web-scraping" class="level4" data-number="13.5.1.1">
<h4 data-number="13.5.1.1" class="anchored" data-anchor-id="what-is-web-scraping"><span class="header-section-number">13.5.1.1</span> What is Web Scraping</h4>
<p>Web scraping is a way to automatically gather information from websites. Instead of spending hours copying and pasting data, you can use scripts to collect large amounts of structured information quickly and consistently. Once you have the data, it can be analyzed, stored, or used for research and decision making.</p>
<p>Web scraping is particularly useful because most web data is created for humans to read, not for machines to process. By scraping, we can turn that information into a format that computers can work with, allowing us to explore trends, track changes, or gain insights that would be really hard to collect manually.</p>
</section>
<section id="use-cases-of-web-scraping" class="level4" data-number="13.5.1.2">
<h4 data-number="13.5.1.2" class="anchored" data-anchor-id="use-cases-of-web-scraping"><span class="header-section-number">13.5.1.2</span> Use Cases of Web Scraping</h4>
<p>Here are some of the use cases of web scarping:</p>
<ul>
<li>Market Analysis
<ul>
<li>Companies use web scraping to track products, prices, and customer reviews, helping them understand market trends and stay competitive.</li>
</ul></li>
<li>Finance and Investment
<ul>
<li>Analysts gather stock prices, financial news, and reports to make informed investment decisions or to analyze market sentiment.</li>
</ul></li>
<li>Academic Research
<ul>
<li>Researchers collect articles, datasets, and public records to support studies and uncover insights across a variety of fields.</li>
</ul></li>
<li>Social Media and Marketing
<ul>
<li>Marketers and analysts monitor trends, hashtags, and audience engagement to understand consumer behavior and improve campaigns.</li>
</ul></li>
</ul>
</section>
<section id="static-versus-dynamic-web-pages" class="level4" data-number="13.5.1.3">
<h4 data-number="13.5.1.3" class="anchored" data-anchor-id="static-versus-dynamic-web-pages"><span class="header-section-number">13.5.1.3</span> Static versus Dynamic Web Pages</h4>
<p>Before scraping, it is important to understand the kind of web pages you are working with:</p>
<ul>
<li>Static Web Pages
<ul>
<li>The content is already in the HTML when the page loads. Everything you need is there, so extracting it is relatively straightforward.</li>
</ul></li>
<li>Dynamic Web Pages
<ul>
<li>The content is generated by JavaScript or updated after the page loads. Fetching the HTML alone may not give you what you want. You may need to interact with the page to see the full content.</li>
</ul></li>
</ul>
</section>
<section id="legal-and-ethical-considerations" class="level4" data-number="13.5.1.4">
<h4 data-number="13.5.1.4" class="anchored" data-anchor-id="legal-and-ethical-considerations"><span class="header-section-number">13.5.1.4</span> Legal and Ethical Considerations</h4>
<p>Even though web scraping can be extremely powerful, it comes with important responsibilities and best practices that should not be ignored.</p>
<ul>
<li><p>Respect robots.txt: Before scraping a site, check its robots.txt file to understand which pages or sections the website owner allows you to access, and make sure to follow these guidelines.</p></li>
<li><p>Avoid overloading servers: Sending too many requests too quickly can strain a website’s server. Introduce pauses between requests, use random delays, and keep your scraping activity at a reasonable pace to avoid causing problems for the website.</p></li>
<li><p>Do not collect sensitive information: Avoid scraping personal, confidential, or protected information unless you have explicit permission to do so, as this could violate privacy laws or ethical standards.</p></li>
<li><p>Check copyright and licensing: Just because you can access the data does not mean you have the right to use or redistribute it freely. Always review the site’s terms of use and any applicable copyright rules.</p></li>
<li><p>Be transparent: When using scraped data in reports, analyses, or projects, clearly cite your sources and acknowledge where the information came from. Transparency helps maintain credibility and respect for the original content creators.</p></li>
</ul>
</section>
</section>
<section id="basics-of-web-requests" class="level3" data-number="13.5.2">
<h3 data-number="13.5.2" class="anchored" data-anchor-id="basics-of-web-requests"><span class="header-section-number">13.5.2</span> Basics of Web Requests</h3>
<p>Before you can extract any data from a website, you need to first fetch the content of the page. In Python, this is typically done using the requests library, which allows you to send HTTP requests and receive responses. Understanding how these requests work is key to effective web scraping.</p>
<p>If you haven’t done so already, you will need install requests to your terminal.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install requests</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<section id="html-basics" class="level4" data-number="13.5.2.1">
<h4 data-number="13.5.2.1" class="anchored" data-anchor-id="html-basics"><span class="header-section-number">13.5.2.1</span> HTML Basics</h4>
<p>To scrape web pages effectively, it is important to understand the basic structure of HTML, which is the language used to create web pages. Web pages are made up of elements enclosed in tags. Some common tags include:</p>
<ul>
<li><p><code>&lt;body&gt;</code>: this tag identifies the main body of the website, which contains the content that is visible to users.</p></li>
<li><p><code>&lt;table&gt;</code>: This tag identifies a table element, which is used to organize data in rows and columns.</p></li>
<li><p><code>&lt;tbody&gt;</code>: This tag identifies the body of the table, which contains all the rows of the table.</p></li>
<li><p><code>&lt;tr&gt;</code>: This tag identifies a table row, which contains individual cells (<code>&lt;td&gt;</code>) with data.</p></li>
</ul>
</section>
<section id="response-status-codes" class="level4" data-number="13.5.2.2">
<h4 data-number="13.5.2.2" class="anchored" data-anchor-id="response-status-codes"><span class="header-section-number">13.5.2.2</span> Response Status Codes</h4>
<p>Every HTTP request returns a status code that indicates whether it was successful.</p>
<ul>
<li><code>200</code> means the request was successful, and the server returned the requested content.</li>
<li><code>404</code> means the page was not found, which usually indicates the URL is incorrect.</li>
<li><code>403</code> means access is forbidden, which often happens when a server blocks automated requests.</li>
<li><code>500</code> indicates a server error on the website.</li>
</ul>
<p>Checking these codes allows you to handle errors gracefully and avoid scraping pages that are unavailable or blocked.</p>
</section>
<section id="http-methods" class="level4" data-number="13.5.2.3">
<h4 data-number="13.5.2.3" class="anchored" data-anchor-id="http-methods"><span class="header-section-number">13.5.2.3</span> HTTP Methods</h4>
<p>The two most common HTTP methods used in web scraping are GET and POST.</p>
<ul>
<li><code>GET</code> requests are used to retrieve data from a web server. This is the method you will use most often because you are usually trying to download the content of a page.</li>
<li><code>POST</code> requests are used to send data to a server, often when submitting forms or interacting with a website. Some websites require POST requests to access certain content or search results.</li>
</ul>
</section>
<section id="using-headers-and-user-agent-strings" class="level4" data-number="13.5.2.4">
<h4 data-number="13.5.2.4" class="anchored" data-anchor-id="using-headers-and-user-agent-strings"><span class="header-section-number">13.5.2.4</span> Using Headers and User-Agent Strings</h4>
<p>Web servers sometimes treat automated requests differently from requests made by real browsers. By adding headers, you can make your requests look more like they are coming from a normal user.</p>
<p>A common header to include is the User-Agent, which identifies the browser and device making the request. Here is an example of what a header can look like:</p>
<div id="9fbff821" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://uconn.edu'</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'User-Agent'</span>: <span class="st">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 '</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">'(KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36'</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(response.status_code)  <span class="co"># prints the HTTP status code</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(response.text[:<span class="dv">500</span>])   <span class="co"># prints the first 500 characters of the HTML</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>200
&lt;!DOCTYPE html&gt;
&lt;html lang="en-US" class="no-js"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;link rel="profile" href="http://gmpg.org/xfn/11" /&gt;
    &lt;link rel="pingback" href="https://uconn.edu/xmlrpc.php" /&gt;
    &lt;title&gt;University of Connecticut&lt;/title&gt;
        &lt;script type="application/ld+json"&gt;
        {
            "@context": "http://schema.org",
            "@type</code></pre>
</div>
</div>
</section>
</section>
<section id="an-introduction-to-beautifulsoup" class="level3" data-number="13.5.3">
<h3 data-number="13.5.3" class="anchored" data-anchor-id="an-introduction-to-beautifulsoup"><span class="header-section-number">13.5.3</span> An Introduction to BeautifulSoup</h3>
<p>BeautifulSoup is one of the most popular Python libraries for web scraping. It helps you collect and organize information from web pages written in HTML or XML. When you look at a web page’s source code, it often looks like a confusing block of text. BeautifulSoup turns that chaos into a clean, organized structure that you can easily search and navigate. It is a reliable tool for collecting data from static websites such as news articles, course lists, or research archives.</p>
<section id="installing-and-importing-beautifulsoup" class="level4" data-number="13.5.3.1">
<h4 data-number="13.5.3.1" class="anchored" data-anchor-id="installing-and-importing-beautifulsoup"><span class="header-section-number">13.5.3.1</span> Installing and Importing BeautifulSoup</h4>
<p>To use BeautifulSoup, you first need to install it.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install beautifulsoup4</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Once installed, import it into your Python script:</p>
<div id="3a2c87e1" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>BeautifulSoup works well alongside the requests library, creating a simple and efficient way to download and process web pages.</p>
</section>
<section id="loading-html-into-beautifulsoup" class="level4" data-number="13.5.3.2">
<h4 data-number="13.5.3.2" class="anchored" data-anchor-id="loading-html-into-beautifulsoup"><span class="header-section-number">13.5.3.2</span> Loading HTML into BeautifulSoup</h4>
<p>Once you have downloaded the HTML content of a web page, the next step is to load it into BeautifulSoup.</p>
<div id="bde9d920" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://decisiondrivers.com/nyc/zip-code/"</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"User-Agent"</span>: <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 "</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"(KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36"</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Status code:"</span>, response.status_code)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">"html.parser"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Status code: 200</code></pre>
</div>
</div>
<p>The <code>requests.get()</code> function fetches the page, and <code>BeautifulSoup()</code> parses it into a structure that can be easily searched. The <code>"html.parser"</code> argument tells BeautifulSoup how to interpret the HTML. The resulting <code>soup</code> object becomes your workspace for exploring and extracting information. You can now search for tags like <code>&lt;table&gt;</code>, <code>&lt;tr&gt;</code>, or <code>&lt;td&gt;</code> to extract the data you need.</p>
<p>Since the status code prints 200, that means the request worked successfully and the page’s content is ready to scrape.</p>
</section>
<section id="navigating-and-searching-the-parse-tree" class="level4" data-number="13.5.3.3">
<h4 data-number="13.5.3.3" class="anchored" data-anchor-id="navigating-and-searching-the-parse-tree"><span class="header-section-number">13.5.3.3</span> Navigating and Searching the Parse Tree</h4>
<p>BeautifulSoup organizes the HTML into a tree like structure that you can move through. Each tag, paragraph, or link becomes something you can directly access.</p>
<p>The most common ways to search are <code>find()</code>, <code>find_all()</code>, and <code>select()</code>.</p>
<ul>
<li><code>find()</code> – finds the first instance of a tag</li>
<li><code>find_all()</code> – finds all instances of a tag</li>
<li><code>select()</code> – finds elements using CSS selectors</li>
</ul>
<div id="e439ef33" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the first heading on the page</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>heading <span class="op">=</span> soup.find(<span class="st">'h1'</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all links on the page</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>links <span class="op">=</span> soup.find_all(<span class="st">'a'</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a CSS selector to find specific items</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>nav_links <span class="op">=</span> soup.select(<span class="st">'nav a'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="extracting-data" class="level4" data-number="13.5.3.4">
<h4 data-number="13.5.3.4" class="anchored" data-anchor-id="extracting-data"><span class="header-section-number">13.5.3.4</span> Extracting Data</h4>
<p>Before writing any scraping code, it’s helpful to understand where the data actually sits within the webpage. You can right-click anywhere on the site and choose Inspect to open your browser’s developer tools. This reveals the HTML structure of the page, where information is organized using tags such as <code>&lt;table&gt;</code>, <code>&lt;tr&gt;</code>, and <code>&lt;td&gt;</code>. These tags define how the data is arranged, helping you identify exactly which elements you’ll need to target with BeautifulSoup.</p>
<p>For example, on the [Decision Drivers NYC ZIP Codes] (https://decisiondrivers.com/nyc/zip-code/) page, the ZIP code information is not stored inside a table but listed under each borough heading. Every borough name appears as a heading tag, such as <code>&lt;h2&gt;</code>, followed by a list of ZIP codes written in plain text or inside <code>&lt;ul&gt;</code> and <code>&lt;li&gt;</code> tags. Instead of looping through table rows, you can search for each heading, record the borough name, and then capture the ZIP codes that appear beneath it. This structure works well with <code>BeautifulSoup</code> because it allows you to identify the borough from the heading and pair it with its corresponding ZIP codes by reading the text that follows.</p>
<div id="7459e023" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>boroughs <span class="op">=</span> []</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>zips <span class="op">=</span> []</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the entire text into lines, then look for boroughs and ZIPs</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> soup.get_text(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, strip<span class="op">=</span><span class="va">True</span>).splitlines()</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>current_borough <span class="op">=</span> <span class="va">None</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> line.strip()</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If the line is a borough name, update the current borough</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> text.upper() <span class="kw">in</span> [<span class="st">"MANHATTAN"</span>, <span class="st">"BROOKLYN"</span>, <span class="st">"QUEENS"</span>, <span class="st">"BRONX"</span>, </span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"STATEN ISLAND"</span>]:</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>        current_borough <span class="op">=</span> text.title()</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If the line is a 5-digit number, it’s a ZIP code</span></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> current_borough <span class="kw">and</span> text.isdigit() <span class="kw">and</span> <span class="bu">len</span>(text) <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>        boroughs.append(current_borough)</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>        zips.append(text)</span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a clean DataFrame</span></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"Borough"</span>: boroughs, <span class="st">"ZIP"</span>: zips})</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop_duplicates().sort_values([<span class="st">"Borough"</span>, <span class="st">"ZIP"</span>]).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows</span></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.head(<span class="dv">10</span>))</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Total ZIP codes found:"</span>, <span class="bu">len</span>(df))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Borough    ZIP
0   Bronx  10451
1   Bronx  10452
2   Bronx  10453
3   Bronx  10454
4   Bronx  10455
5   Bronx  10456
6   Bronx  10457
7   Bronx  10458
8   Bronx  10459
9   Bronx  10460

Total ZIP codes found: 179</code></pre>
</div>
</div>
</section>
<section id="extended-example" class="level4" data-number="13.5.3.5">
<h4 data-number="13.5.3.5" class="anchored" data-anchor-id="extended-example"><span class="header-section-number">13.5.3.5</span> Extended Example</h4>
<p>This is an example that will be useful for our midterm assignment. Here, we scrape the addresses of all the precincts in NYC.</p>
<div id="b866600a" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://www.nyc.gov/site/nypd/bureaus/patrol/precincts-landing.page"</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"User-Agent"</span>: <span class="st">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 "</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"(KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36"</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url, headers<span class="op">=</span>headers)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Status code:"</span>, response.status_code)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">"html.parser"</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Locate the table containing the precinct information</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> soup.find(<span class="st">"table"</span>, class_<span class="op">=</span><span class="st">"rt"</span>)</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: If the table is found, extract all precinct rows</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> table:</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> table.find_all(<span class="st">"tr"</span>)</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"No table found on this page."</span>)</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>    rows <span class="op">=</span> []</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Prepare a list to store precinct data as dictionaries</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>precinct_data <span class="op">=</span> []</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Loop through each row and collect precinct name and address</span></span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> rows:</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>    precinct_cell <span class="op">=</span> row.find(<span class="st">"td"</span>, attrs<span class="op">=</span>{<span class="st">"data-label"</span>: <span class="st">"Precinct"</span>})</span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>    address_cell <span class="op">=</span> row.find(<span class="st">"td"</span>, attrs<span class="op">=</span>{<span class="st">"data-label"</span>: <span class="st">"Address"</span>})</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> precinct_cell <span class="kw">and</span> address_cell:</span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>        precinct_name <span class="op">=</span> precinct_cell.text.strip()</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>        address <span class="op">=</span> address_cell.text.strip()</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>        precinct_data.append({</span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Precinct"</span>: precinct_name,</span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Address"</span>: address</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a>precincts_df <span class="op">=</span> pd.DataFrame(precinct_data)</span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Display a quick summary</span></span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Extracted </span><span class="sc">{</span><span class="bu">len</span>(precincts_df)<span class="sc">}</span><span class="ss"> precincts successfully."</span>)</span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(precincts_df.head())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Status code: 200
Extracted 78 precincts successfully.
       Precinct              Address
0  1st Precinct    16 Ericsson Place
1  5th Precinct  19 Elizabeth Street
2  6th Precinct   233 West 10 Street
3  7th Precinct   19 1/2 Pitt Street
4  9th Precinct    321 East 5 Street</code></pre>
</div>
</div>
</section>
</section>
<section id="an-introduction-to-selenium" class="level3" data-number="13.5.4">
<h3 data-number="13.5.4" class="anchored" data-anchor-id="an-introduction-to-selenium"><span class="header-section-number">13.5.4</span> An Introduction to Selenium</h3>
<p>While BeautifulSoup works best for static websites, not all web pages are created equal. Many modern sites use JavaScript to load content after the initial HTML has already been sent to the browser. This means that if you use <code>requests</code> and <code>BeautifulSoup</code>, you might get an empty page or partial data. This is where you use Selenium.</p>
<p>Selenium is a powerful browser automation tool that lets you control an actual web browser, like Chrome or Firefox, through Python. It can click buttons, fill out forms, scroll through pages, and load JavaScript rendered content before scraping it. You can then pass the fully loaded page to BeautifulSoup for parsing.</p>
<section id="installing-and-setting-up-selenium" class="level4" data-number="13.5.4.1">
<h4 data-number="13.5.4.1" class="anchored" data-anchor-id="installing-and-setting-up-selenium"><span class="header-section-number">13.5.4.1</span> Installing and Setting Up Selenium</h4>
<p>To use Selenium, you first need to install it.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb57"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install selenium</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Selenium also requires a WebDriver, which acts as a bridge between Python and your browser. If you are using Google Chrome, download ChromeDriver and make sure it is installed correctly. You can verify this by typing the following command in your terminal:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb58"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">chromedriver</span> <span class="at">--version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>If you are on macOS and see the error “chromedriver cannot be opened because the developer cannot be verified,” you can fix it by running this command:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">xattr</span> <span class="at">-d</span> com.apple.quarantine <span class="va">$(</span><span class="fu">which</span> chromedriver<span class="va">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>After this, your WebDriver should work normally.</p>
<p>Now we can work on the code itself. This is how we set up Selenium:</p>
<div id="982737f6" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.chrome.service <span class="im">import</span> Service</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.chrome.options <span class="im">import</span> Options</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Before launching Chrome, it’s common to set a few options that control how it behaves. For scraping, “headless” mode is useful because it runs Chrome without opening a window. It is faster and less distracting.</p>
<div id="909e6ae9" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Chrome options to control browser behavior</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>options <span class="op">=</span> Options()</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run Chrome invisibly (no window)</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>options.add_argument(<span class="st">"--headless"</span>)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Disable GPU acceleration for smoother headless operation</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>options.add_argument(<span class="st">"--disable-gpu"</span>)</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Helps avoid permission issues in some environments</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>options.add_argument(<span class="st">"--no-sandbox"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Instead of typing out the full path manually, this function looks through your system’s PATH to find where chromedriver is installed.</p>
<div id="fdd2059a" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_chromedriver():</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Loop through all directories listed in the system PATH</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> path <span class="kw">in</span> os.environ[<span class="st">"PATH"</span>].split(os.pathsep):</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Build the potential path to chromedriver</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>        driver_path <span class="op">=</span> os.path.join(path, <span class="st">"chromedriver"</span>)</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if it exists and is executable</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> os.path.isfile(driver_path) <span class="kw">and</span> os.access(driver_path, os.X_OK):</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> driver_path  <span class="co"># Return the path if found</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span>  <span class="co"># Return None if not found</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the function to locate chromedriver</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>chromedriver_path <span class="op">=</span> find_chromedriver()</span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a><span class="co"># If found, print its path</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> chromedriver_path:</span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Found ChromeDriver at:"</span>, chromedriver_path)</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a><span class="co"># If not found, raise an error with instructions</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">FileNotFoundError</span>(<span class="st">"ChromeDriver not found."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Found ChromeDriver at: /usr/local/bin/chromedriver</code></pre>
</div>
</div>
<p>Once you have the driver path and your browser settings, you can start Chrome.</p>
<div id="c783df4f" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the Service class and connect the driver</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>service <span class="op">=</span> Service(chromedriver_path)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Start the Chrome WebDriver with the defined options</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome(service<span class="op">=</span>service, options<span class="op">=</span>options)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>At this point, Selenium is ready. You can visit a webpage by calling:</p>
<div id="e268c2d8" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>driver.get(<span class="st">"https://example.com"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="using-selenium-to-load-dynamic-pages" class="level4" data-number="13.5.4.2">
<h4 data-number="13.5.4.2" class="anchored" data-anchor-id="using-selenium-to-load-dynamic-pages"><span class="header-section-number">13.5.4.2</span> Using Selenium to Load Dynamic Pages</h4>
<p>Here is a simple example that shows how Selenium can open a website, wait for it to load, and then pass the content to BeautifulSoup.</p>
<div id="81270dae" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.chrome.options <span class="im">import</span> Options</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.common.by <span class="im">import</span> By</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.support.ui <span class="im">import</span> WebDriverWait</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.support <span class="im">import</span> expected_conditions <span class="im">as</span> EC</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> scrape_schedule(url, league):  <span class="co"># league = "NFL" or "MLB"</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>    league <span class="op">=</span> league.upper()</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Identify the correct team link pattern based on the league</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    team_href <span class="op">=</span> <span class="st">"/nfl/team/_/name"</span> <span class="cf">if</span> league <span class="op">==</span> <span class="st">"NFL"</span> <span class="cf">else</span> <span class="st">"/mlb/team/_/name"</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Configure and launch Chrome</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>    options <span class="op">=</span> Options()</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>    options.add_argument(<span class="st">"--headless=new"</span>)</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>    options.add_argument(<span class="st">"--window-size=1920,1080"</span>)</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>    driver <span class="op">=</span> webdriver.Chrome(options<span class="op">=</span>options)</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Load the ESPN schedule page</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>    driver.get(url)</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>    wait <span class="op">=</span> WebDriverWait(driver, <span class="dv">25</span>)</span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Wait until key elements are visible (date headers and team links)</span></span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>    wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, </span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"div.Table__Title"</span>)))</span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a>    wait.until(EC.presence_of_element_located((By.CSS_SELECTOR, </span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"a.AnchorLink[href*='</span><span class="sc">{</span>team_href<span class="sc">}</span><span class="ss">']"</span>)))</span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a>    rows_out <span class="op">=</span> []</span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract data by date section</span></span>
<span id="cb66-32"><a href="#cb66-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Each schedule day starts with a &lt;div class="Table__Title"&gt; element</span></span>
<span id="cb66-33"><a href="#cb66-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> title <span class="kw">in</span> driver.find_elements(By.CSS_SELECTOR, <span class="st">"div.Table__Title"</span>):</span>
<span id="cb66-34"><a href="#cb66-34" aria-hidden="true" tabindex="-1"></a>        date_text <span class="op">=</span> title.text.strip()</span>
<span id="cb66-35"><a href="#cb66-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> date_text:</span>
<span id="cb66-36"><a href="#cb66-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span>  <span class="co"># Skip if the date header is empty</span></span>
<span id="cb66-37"><a href="#cb66-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-38"><a href="#cb66-38" aria-hidden="true" tabindex="-1"></a>        <span class="co"># The table directly after the title contains the matchups</span></span>
<span id="cb66-39"><a href="#cb66-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb66-40"><a href="#cb66-40" aria-hidden="true" tabindex="-1"></a>            table <span class="op">=</span> title.find_element(By.XPATH, <span class="st">"following::table[1]"</span>)</span>
<span id="cb66-41"><a href="#cb66-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:</span>
<span id="cb66-42"><a href="#cb66-42" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span>  <span class="co"># Skip if structure differs</span></span>
<span id="cb66-43"><a href="#cb66-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-44"><a href="#cb66-44" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract teams for each game</span></span>
<span id="cb66-45"><a href="#cb66-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> row <span class="kw">in</span> table.find_elements(By.XPATH, </span>
<span id="cb66-46"><a href="#cb66-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">".//tr[contains(@class,'Table__TR')]"</span>):</span>
<span id="cb66-47"><a href="#cb66-47" aria-hidden="true" tabindex="-1"></a>            teams <span class="op">=</span> [</span>
<span id="cb66-48"><a href="#cb66-48" aria-hidden="true" tabindex="-1"></a>                a.text.strip()</span>
<span id="cb66-49"><a href="#cb66-49" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> a <span class="kw">in</span> row.find_elements(By.CSS_SELECTOR, </span>
<span id="cb66-50"><a href="#cb66-50" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f"td a.AnchorLink[href*='</span><span class="sc">{</span>team_href<span class="sc">}</span><span class="ss">']"</span>)</span>
<span id="cb66-51"><a href="#cb66-51" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> a.text.strip()</span>
<span id="cb66-52"><a href="#cb66-52" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb66-53"><a href="#cb66-53" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">len</span>(teams) <span class="op">&gt;=</span> <span class="dv">2</span>:</span>
<span id="cb66-54"><a href="#cb66-54" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Format as "Away @ Home"</span></span>
<span id="cb66-55"><a href="#cb66-55" aria-hidden="true" tabindex="-1"></a>                rows_out.append({<span class="st">"Date"</span>: date_text, <span class="st">"Matchup"</span>: <span class="ss">f"</span><span class="sc">{</span>teams[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> @ </span><span class="sc">{</span></span>
<span id="cb66-56"><a href="#cb66-56" aria-hidden="true" tabindex="-1"></a>                    teams[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>})</span>
<span id="cb66-57"><a href="#cb66-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-58"><a href="#cb66-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># --- Step 5: Clean up and close browser ---</span></span>
<span id="cb66-59"><a href="#cb66-59" aria-hidden="true" tabindex="-1"></a>    driver.quit()</span>
<span id="cb66-60"><a href="#cb66-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-61"><a href="#cb66-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build a clean DataFrame</span></span>
<span id="cb66-62"><a href="#cb66-62" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(rows_out, columns<span class="op">=</span>[<span class="st">"Date"</span>, <span class="st">"Matchup"</span>])</span>
<span id="cb66-63"><a href="#cb66-63" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"League"</span>] <span class="op">=</span> league</span>
<span id="cb66-64"><a href="#cb66-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb66-65"><a href="#cb66-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-66"><a href="#cb66-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-67"><a href="#cb66-67" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 6: Run for both leagues ---</span></span>
<span id="cb66-68"><a href="#cb66-68" aria-hidden="true" tabindex="-1"></a>nfl_df <span class="op">=</span> scrape_schedule(<span class="st">"https://www.espn.com/nfl/schedule"</span>, <span class="st">"NFL"</span>)</span>
<span id="cb66-69"><a href="#cb66-69" aria-hidden="true" tabindex="-1"></a>mlb_df <span class="op">=</span> scrape_schedule(<span class="st">"https://www.espn.com/mlb/schedule"</span>, <span class="st">"MLB"</span>)</span>
<span id="cb66-70"><a href="#cb66-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-71"><a href="#cb66-71" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"===== NFL ====="</span>)</span>
<span id="cb66-72"><a href="#cb66-72" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nfl_df)</span>
<span id="cb66-73"><a href="#cb66-73" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">===== MLB ====="</span>)</span>
<span id="cb66-74"><a href="#cb66-74" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mlb_df)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>===== NFL =====
                          Date                      Matchup League
0   Thursday, December 4, 2025             Dallas @ Detroit    NFL
1     Sunday, December 7, 2025            Seattle @ Atlanta    NFL
2     Sunday, December 7, 2025         Cincinnati @ Buffalo    NFL
3     Sunday, December 7, 2025        Tennessee @ Cleveland    NFL
4     Sunday, December 7, 2025       Washington @ Minnesota    NFL
5     Sunday, December 7, 2025             Miami @ New York    NFL
6     Sunday, December 7, 2025      New Orleans @ Tampa Bay    NFL
7     Sunday, December 7, 2025  Indianapolis @ Jacksonville    NFL
8     Sunday, December 7, 2025       Pittsburgh @ Baltimore    NFL
9     Sunday, December 7, 2025           Denver @ Las Vegas    NFL
10    Sunday, December 7, 2025          Chicago @ Green Bay    NFL
11    Sunday, December 7, 2025        Los Angeles @ Arizona    NFL
12    Sunday, December 7, 2025        Houston @ Kansas City    NFL
13    Monday, December 8, 2025   Philadelphia @ Los Angeles    NFL

===== MLB =====
                                             Date                    Matchup  \
0     Friday, February 20, 2026 - Spring Training       New York @ Baltimore   
1     Friday, February 20, 2026 - Spring Training          Chicago @ Chicago   
2     Friday, February 20, 2026 - Spring Training         Arizona @ Colorado   
3     Friday, February 20, 2026 - Spring Training        San Diego @ Seattle   
4     Friday, February 20, 2026 - Spring Training        Kansas City @ Texas   
5   Saturday, February 21, 2026 - Spring Training         Colorado @ Arizona   
6   Saturday, February 21, 2026 - Spring Training     Pittsburgh @ Baltimore   
7   Saturday, February 21, 2026 - Spring Training            Texas @ Chicago   
8   Saturday, February 21, 2026 - Spring Training        Athletics @ Chicago   
9   Saturday, February 21, 2026 - Spring Training     Cincinnati @ Cleveland   
10  Saturday, February 21, 2026 - Spring Training    San Diego @ Kansas City   
11  Saturday, February 21, 2026 - Spring Training      Cleveland @ Milwaukee   
12  Saturday, February 21, 2026 - Spring Training         Boston @ Minnesota   
13  Saturday, February 21, 2026 - Spring Training           Miami @ New York   
14  Saturday, February 21, 2026 - Spring Training         Detroit @ New York   
15  Saturday, February 21, 2026 - Spring Training    San Francisco @ Seattle   
16  Saturday, February 21, 2026 - Spring Training     Washington @ St. Louis   
17  Saturday, February 21, 2026 - Spring Training        Atlanta @ Tampa Bay   
18  Saturday, February 21, 2026 - Spring Training     Philadelphia @ Toronto   
19  Saturday, February 21, 2026 - Spring Training       Houston @ Washington   
20  Saturday, February 21, 2026 - Spring Training  Los Angeles @ Los Angeles   
21    Sunday, February 22, 2026 - Spring Training      Los Angeles @ Arizona   
22    Sunday, February 22, 2026 - Spring Training      Cleveland @ Athletics   
23    Sunday, February 22, 2026 - Spring Training        Minnesota @ Atlanta   
24    Sunday, February 22, 2026 - Spring Training           Toronto @ Boston   
25    Sunday, February 22, 2026 - Spring Training        Milwaukee @ Chicago   
26    Sunday, February 22, 2026 - Spring Training       Seattle @ Cincinnati   
27    Sunday, February 22, 2026 - Spring Training        Baltimore @ Detroit   
28    Sunday, February 22, 2026 - Spring Training        St. Louis @ Houston   
29    Sunday, February 22, 2026 - Spring Training         Washington @ Miami   
30    Sunday, February 22, 2026 - Spring Training    Kansas City @ Milwaukee   
31    Sunday, February 22, 2026 - Spring Training        New York @ New York   
32    Sunday, February 22, 2026 - Spring Training  Pittsburgh @ Philadelphia   
33    Sunday, February 22, 2026 - Spring Training     Tampa Bay @ Pittsburgh   
34    Sunday, February 22, 2026 - Spring Training    Los Angeles @ San Diego   
35    Sunday, February 22, 2026 - Spring Training    Chicago @ San Francisco   
36    Sunday, February 22, 2026 - Spring Training           Colorado @ Texas   

   League  
0     MLB  
1     MLB  
2     MLB  
3     MLB  
4     MLB  
5     MLB  
6     MLB  
7     MLB  
8     MLB  
9     MLB  
10    MLB  
11    MLB  
12    MLB  
13    MLB  
14    MLB  
15    MLB  
16    MLB  
17    MLB  
18    MLB  
19    MLB  
20    MLB  
21    MLB  
22    MLB  
23    MLB  
24    MLB  
25    MLB  
26    MLB  
27    MLB  
28    MLB  
29    MLB  
30    MLB  
31    MLB  
32    MLB  
33    MLB  
34    MLB  
35    MLB  
36    MLB  </code></pre>
</div>
</div>
<p>Here is how the code works:</p>
<ol type="1">
<li>Setting Up Selenium</li>
</ol>
<ul>
<li>The first part initializes the Chrome browser in headless mode so it runs quietly in the background.</li>
</ul>
<ol start="2" type="1">
<li>Waiting for the Page to Load</li>
</ol>
<ul>
<li>Selenium doesn’t automatically know when a website’s content is ready. Using <code>WebDriverWait</code> and <code>expected_conditions</code>, the script pauses until:
<ul>
<li>A date header (<code>div.Table__Title</code>) appears</li>
<li>A team link with a specific pattern (<code>/nfl/team/_/name</code> or <code>/mlb/team/_/name</code>) exists</li>
</ul></li>
</ul>
<ol start="3" type="1">
<li>Looping Through Each Day’s Games</li>
</ol>
<ul>
<li>Each date on the ESPN page appears as a header <code>(Table__Title)</code>, followed by a table of games. The script finds each table using the XPath rule <code>"following::table[1]"</code>, meaning the first table that comes after the header.</li>
</ul>
<ol start="4" type="1">
<li>Extracting Teams from Each Row</li>
</ol>
<ul>
<li>Inside each table, every row <code>(tr)</code> represents one game. The team names are stored in <code>&lt;a&gt;</code> tags with URLs containing the league’s team name pattern. Selenium grabs these links and combines them into <code>"Away @ Home"</code> format.</li>
</ul>
<ol start="5" type="1">
<li>Creating a DataFrame</li>
</ol>
<ul>
<li>Once all data is collected, it’s turned into a Pandas DataFrame with columns:
<ul>
<li><code>Date</code>: the game date from the header</li>
<li><code>Matchup</code>: formatted team pairing</li>
<li><code>League</code>: either NFL or MLB</li>
</ul></li>
</ul>
<ol start="6" type="1">
<li>Closing the Browser</li>
</ol>
<ul>
<li>Always close the browser using <code>driver.quit()</code> to free up system resources.</li>
</ul>
</section>
</section>
<section id="further-reading-1" class="level3" data-number="13.5.5">
<h3 data-number="13.5.5" class="anchored" data-anchor-id="further-reading-1"><span class="header-section-number">13.5.5</span> Further Reading</h3>
<ol type="1">
<li><a href="https://realpython.com/tutorials/web-scraping/">Python Web Scraping Tutorials</a></li>
<li><a href="https://www.scrapingbee.com/blog/web-scraping-101-with-python/">Python Web Scraping: Full Tutorial With Examples</a></li>
<li><a href="https://www.learndatasci.com/tutorials/ultimate-guide-web-scraping-w-python-requests-and-beautifulsoup/">Ultimate Guide to Web Scraping with Python</a></li>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup Documentation</a></li>
<li><a href="https://medium.com/@datajournal/web-scraping-with-selenium-955fbaae3421">Webscraping With Selenium</a></li>
</ol>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-mcinnes2018umap" class="csl-entry" role="listitem">
McInnes, L., Healy, J., Saul, N., &amp; Großberger, L. (2018). <span>UMAP</span>: Uniform manifold approximation and projection. <em>Journal of Open Source Software</em>, <em>3</em>(29). <a href="https://doi.org/10.21105/joss.00861">https://doi.org/10.21105/joss.00861</a>
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./20-deeplearning.html" class="pagination-link" aria-label="Deep Learning">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Deep Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./95-exercises.html" class="pagination-link" aria-label="Exercises">
        <span class="nav-page-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Exercises</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>